(()=>{"use strict";var t={zh:{cardTitle:function(t){return"".concat(t||"未命名设备"," 卡片")},controlPanelTitle:"发送控制命令",sendButton:"发送",testButton:"测试",nameLabel:"设备名称: ",selectEntity:"请选择实体",selectCommand:"请选择命令",selectOption:"请选择选项",enterCommand:"请输入命令值...",clearButton:"清空",validEntity:"请选择有效实体",stateOn:"开",stateOff:"关",defaultIconPath:"/local/community/RosCard/icon_img/states_device_light_on_icon.png",entity:"实体",executionModes:{immediate:"立即执行",delayed:"延迟执行",popup:"弹窗询问"},independentDisplay:"是否独立显示",yes:"是",no:"否"},en:{cardTitle:function(t){return"".concat(t||"Unnamed Device"," Card")},controlPanelTitle:"Send Control Commands",sendButton:"Send",testButton:"Test",nameLabel:"Device Name: ",selectEntity:"Please select an entity",selectCommand:"Please select a command",selectOption:"Please select an option",enterCommand:"Enter command value...",clearButton:"Clear",validEntity:"Please select a valid entity",stateOn:"On",stateOff:"Off",defaultIconPath:"/local/community/RosCard/icon_img/states_device_light_on_icon.png",entity:"Entity",executionModes:{immediate:"Immediate",delayed:"Delayed",popup:"Popup Ask"},independentDisplay:"Show independently",yes:"Yes",no:"No"}};function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},e(t)}function n(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,r(i.key),i)}}function r(t){var n=function(t){if("object"!=e(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,"string");if("object"!=e(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==e(n)?n:n+""}function i(t){var e="function"==typeof Map?new Map:void 0;return i=function(t){if(null===t||!function(t){try{return-1!==Function.toString.call(t).indexOf("[native code]")}catch(e){return"function"==typeof t}}(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return function(t,e,n){if(o())return Reflect.construct.apply(null,arguments);var r=[null];r.push.apply(r,e);var i=new(t.bind.apply(t,r));return n&&a(i,n.prototype),i}(t,arguments,c(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),a(n,t)},i(t)}function o(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(o=function(){return!!t})()}function a(t,e){return a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},a(t,e)}function c(t){return c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},c(t)}var u=function(r){function i(){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(n=function(t,n,r){return n=c(n),function(t,n){if(n&&("object"==e(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,o()?Reflect.construct(n,r||[],c(t).constructor):n.apply(t,r))}(this,i)).firstRender=!0,n._language=navigator.language.startsWith("zh")?"zh":"en",n._translations=t,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a(t,e)}(i,r),u=i,(l=[{key:"_createButton",value:function(t,e){var n=document.createElement("button");return n.innerText=t,n.style.margin="4px",n.style.padding="8px 12px",n.style.cursor="pointer",n.style.borderRadius="4px",n.onclick=e.bind(this),n}},{key:"_createIcon",value:function(t){var e=document.createElement("img");return e.src=t||this._translations[this._language].defaultIconPath,e.style.position="absolute",e.style.top="50px",e.style.right="30px",e.style.width="60px",e.style.height="60px",e}},{key:"_t",value:function(t){var e;return(null===(e=this._translations[this._language])||void 0===e?void 0:e[t])||""}}])&&n(u.prototype,l),Object.defineProperty(u,"prototype",{writable:!1}),u;var u,l}(i(HTMLElement));function l(t){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},l(t)}function s(t){return function(t){if(Array.isArray(t))return p(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||f(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(t,e){if(t){if("string"==typeof t)return p(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?p(t,e):void 0}}function p(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function d(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function y(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?d(Object(n),!0).forEach(function(e){h(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function h(t,e,n){return(e=m(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function v(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,m(r.key),r)}}function m(t){var e=function(t){if("object"!=l(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=l(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==l(e)?e:e+""}function b(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(b=function(){return!!t})()}function g(t){return g=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},g(t)}function _(t,e){return _=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},_(t,e)}var O=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=function(t,e,n){return e=g(e),function(t,e){if(e&&("object"==l(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,b()?Reflect.construct(e,n||[],g(t).constructor):e.apply(t,n))}(this,e))._translations={zh:y(y({},t._translations.zh),{},{mediaCommands:[{label:"播放",value:"media_play"},{label:"暂停",value:"media_pause"},{label:"音量增加",value:"volume_up"},{label:"音量减少",value:"volume_down"},{label:"静音",value:"volume_mute_true"},{label:"取消静音",value:"volume_mute_false"}]}),en:y(y({},t._translations.en),{},{mediaCommands:[{label:"Play",value:"media_play"},{label:"Pause",value:"media_pause"},{label:"Volume Up",value:"volume_up"},{label:"Volume Down",value:"volume_down"},{label:"Mute",value:"volume_mute_true"},{label:"Unmute",value:"volume_mute_false"}]})},t.addEventListener("config-changed",function(e){t.setConfig(e.detail.config)}),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_(t,e)}(e,t),n=e,(r=[{key:"setConfig",value:function(t){this._config=y(y({},t),{},{tv_name:t.tv_name||("zh"===this._language?"未命名电视":"Unnamed TV"),entities:Array.isArray(null==t?void 0:t.entities)?s(t.entities):[],icon_path:t.icon_path||"/local/community/RosCard/icon_img/icon_tv.png",tv_type:t.tv_type||"android_tv"}),this._hass&&this.render()}},{key:"hass",set:function(t){this._hass=t,this.firstRender&&(this._config&&this.render(),this.firstRender=!1)}},{key:"render",value:function(){var t=this;if(this._hass){this.innerHTML="";var e=document.createElement("ha-card");e.header=this._translations[this._language].cardTitle(this._config.tv_name),e.appendChild(this._createIcon(this._config.icon_path));var n=document.createElement("div");n.style.padding="16px",n.style.position="relative",n.innerHTML="<h3>".concat(this._translations[this._language].controlPanelTitle,"</h3>"),Array.isArray(this._config.entities)&&this._config.entities.length>0&&this._config.entities.forEach(function(e){"media_player"===e.type&&e.commands&&Object.entries(e.commands).forEach(function(r){var i=function(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,a,c=[],u=!0,l=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=o.call(n)).done)&&(c.push(r.value),c.length!==e);u=!0);}catch(t){l=!0,i=t}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw i}}return c}}(t,e)||f(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(r,2),o=i[0],a=i[1],c=document.createElement("div");c.style.marginBottom="8px",c.innerHTML="<span>".concat(e.entity_id,": ").concat(o,"</span>");var u=t._createButton(t._translations[t._language].sendButton,function(){"volume_mute"===a?t._hass.callService(e.type,a,{entity_id:e.entity_id,is_volume_muted:o.includes("静音")||o.includes("Mute")}):t._hass.callService(e.type,a,{entity_id:e.entity_id})});c.appendChild(u),n.appendChild(c)})}),e.appendChild(n),this.appendChild(e)}}},{key:"getCardSize",value:function(){return 4}}])&&v(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(u);function w(t){return w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},w(t)}function E(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,j(r.key),r)}}function j(t){var e=function(t){if("object"!=w(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=w(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==w(e)?e:e+""}function S(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(S=function(){return!!t})()}function P(t){return P=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},P(t)}function C(t,e){return C=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},C(t,e)}var x=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e,n){return e=P(e),function(t,e){if(e&&("object"==w(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,S()?Reflect.construct(e,n||[],P(t).constructor):e.apply(t,n))}(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&C(t,e)}(e,t),n=e,r=[{key:"setConfig",value:function(t){this._config=t||{},this.render()}},{key:"hass",set:function(t){this._hass=t}},{key:"render",value:function(){var t,e,n=this;this.innerHTML="";var r=document.createElement("div");r.style.padding="16px";var i=document.createElement("label");i.style.display="block",i.style.marginBottom="8px",i.innerText=this._translations[this._language].nameLabel;var o=document.createElement("input");o.type="text",o.value=(null===(t=this._config)||void 0===t?void 0:t.tv_name)||"",o.style.width="100%",o.style.padding="8px",o.style.boxSizing="border-box",o.addEventListener("change",function(t){n._config.tv_name=t.target.value,n.dispatchEvent(new CustomEvent("config-changed",{detail:{config:n._config}}))}),r.appendChild(i),r.appendChild(o);var a=document.createElement("div");a.style.marginTop="16px";var c=document.createElement("h4");c.innerText="Entities",a.appendChild(c),Array.isArray(null===(e=this._config)||void 0===e?void 0:e.entities)||(this._config.entities=[]),this._config.entities.forEach(function(t,e){var r,i=document.createElement("div");i.style.marginBottom="8px",i.style.display="flex",i.style.gap="8px";var o=document.createElement("select");o.style.flex="1",o.innerHTML='<option value="">Select Entity</option>',Object.keys((null===(r=n._hass)||void 0===r?void 0:r.states)||{}).forEach(function(e){var n=document.createElement("option");n.value=e,n.text=e,e===t.entity_id&&(n.selected=!0),o.appendChild(n)}),o.addEventListener("change",function(t){n._config.entities[e].entity_id=t.target.value,n.dispatchEvent(new CustomEvent("config-changed",{detail:{config:n._config}}))});var c=n._createButton("Delete",function(){n._config.entities.splice(e,1),n.dispatchEvent(new CustomEvent("config-changed",{detail:{config:n._config}})),n.render()});i.appendChild(o),i.appendChild(c),a.appendChild(i)});var u=this._createButton("Add Entity",function(){n._config.entities.push({entity_id:""}),n.dispatchEvent(new CustomEvent("config-changed",{detail:{config:n._config}})),n.render()});a.appendChild(u),r.appendChild(a),this.appendChild(r)}}],r&&E(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(u);function T(t){return T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},T(t)}function k(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function A(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function R(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?A(Object(n),!0).forEach(function(e){B(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):A(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function B(t,e,n){return(e=D(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function L(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,D(r.key),r)}}function D(t){var e=function(t){if("object"!=T(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=T(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==T(e)?e:e+""}function M(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(M=function(){return!!t})()}function z(t){return z=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},z(t)}function H(t,e){return H=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},H(t,e)}var I=function(t){function e(){var t,n,r,i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=this,r=e,r=z(r),t=function(t,e){if(e&&("object"==T(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(n,M()?Reflect.construct(r,i||[],z(n).constructor):r.apply(n,i)))._translations={zh:R(R({},t._translations.zh),{},{brightness:"亮度",color:"颜色",colorTemp:"色温",scene:"场景"}),en:R(R({},t._translations.en),{},{brightness:"Brightness",color:"Color",colorTemp:"Color Temp",scene:"Scene"})},t.addEventListener("config-changed",function(e){t.setConfig(e.detail.config)}),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&H(t,e)}(e,t),n=e,r=[{key:"setConfig",value:function(t){var e;this._config=R(R({},t),{},{light_name:t.light_name||("zh"===this._language?"未命名灯光":"Unnamed Light"),entities:Array.isArray(null==t?void 0:t.entities)?(e=t.entities,function(t){if(Array.isArray(t))return k(t)}(e)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(e)||function(t,e){if(t){if("string"==typeof t)return k(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?k(t,e):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()):[],icon_path:t.icon_path||"/local/community/RosCard/icon_img/icon_light.png"}),this._hass&&this.render()}},{key:"hass",set:function(t){this._hass=t,this.firstRender&&(this._config&&this.render(),this.firstRender=!1)}},{key:"render",value:function(){var t=this;if(this._hass){this.innerHTML="";var e=document.createElement("ha-card");e.header=this._translations[this._language].cardTitle(this._config.light_name),e.appendChild(this._createIcon(this._config.icon_path));var n=document.createElement("div");n.style.padding="16px",n.style.position="relative",n.innerHTML="<h3>".concat(this._translations[this._language].controlPanelTitle,"</h3>"),Array.isArray(this._config.entities)&&this._config.entities.length>0&&this._config.entities.forEach(function(e){if(e.entity_id&&e.entity_id.startsWith("light.")){var r,i=document.createElement("div");i.style.marginBottom="12px",i.style.padding="8px",i.style.border="1px solid #ddd",i.style.borderRadius="4px";var o=t._hass.states[e.entity_id],a="on"===(null==o?void 0:o.state)?t._translations[t._language].stateOn:t._translations[t._language].stateOff;i.innerHTML='<div style="margin-bottom: 8px;"><strong>'.concat(e.entity_id,"</strong> - ").concat(a,"</div>");var c=t._createButton("on"===(null==o?void 0:o.state)?"Off":"On",function(){var n="on"===(null==o?void 0:o.state)?"turn_off":"turn_on";t._hass.callService("light",n,{entity_id:e.entity_id})});if(i.appendChild(c),void 0!==(null==o||null===(r=o.attributes)||void 0===r?void 0:r.brightness)){var u=Math.round(o.attributes.brightness/255*100),l=document.createElement("input");l.type="range",l.min="0",l.max="100",l.value=u,l.style.width="100%",l.style.marginTop="8px",l.addEventListener("change",function(n){var r=Math.round(n.target.value/100*255);t._hass.callService("light","turn_on",{entity_id:e.entity_id,brightness:r})}),i.appendChild(l)}n.appendChild(i)}}),e.appendChild(n),this.appendChild(e)}}},{key:"getCardSize",value:function(){return 4}}],r&&L(n.prototype,r),i&&L(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,i}(u);function W(t){return W="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},W(t)}function U(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,$(r.key),r)}}function $(t){var e=function(t){if("object"!=W(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=W(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==W(e)?e:e+""}function F(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(F=function(){return!!t})()}function V(t){return V=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},V(t)}function N(t,e){return N=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},N(t,e)}var Y=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e,n){return e=V(e),function(t,e){if(e&&("object"==W(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,F()?Reflect.construct(e,n||[],V(t).constructor):e.apply(t,n))}(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&N(t,e)}(e,t),n=e,r=[{key:"setConfig",value:function(t){this._config=t||{},this.render()}},{key:"hass",set:function(t){this._hass=t}},{key:"render",value:function(){var t,e,n=this;this.innerHTML="";var r=document.createElement("div");r.style.padding="16px";var i=document.createElement("label");i.style.display="block",i.style.marginBottom="8px",i.innerText="灯光名称:";var o=document.createElement("input");o.type="text",o.value=(null===(t=this._config)||void 0===t?void 0:t.light_name)||"",o.style.width="100%",o.style.padding="8px",o.style.boxSizing="border-box",o.addEventListener("change",function(t){n._config.light_name=t.target.value,n.dispatchEvent(new CustomEvent("config-changed",{detail:{config:n._config}}))}),r.appendChild(i),r.appendChild(o);var a=document.createElement("div");a.style.marginTop="16px";var c=document.createElement("h4");c.innerText="Light Entities",a.appendChild(c),Array.isArray(null===(e=this._config)||void 0===e?void 0:e.entities)||(this._config.entities=[]),this._config.entities.forEach(function(t,e){var r,i=document.createElement("div");i.style.marginBottom="8px",i.style.display="flex",i.style.gap="8px";var o=document.createElement("select");o.style.flex="1",o.innerHTML='<option value="">Select Light Entity</option>',Object.keys((null===(r=n._hass)||void 0===r?void 0:r.states)||{}).filter(function(t){return t.startsWith("light.")}).forEach(function(e){var n=document.createElement("option");n.value=e,n.text=e,e===t.entity_id&&(n.selected=!0),o.appendChild(n)}),o.addEventListener("change",function(t){n._config.entities[e].entity_id=t.target.value,n.dispatchEvent(new CustomEvent("config-changed",{detail:{config:n._config}}))});var c=n._createButton("Delete",function(){n._config.entities.splice(e,1),n.dispatchEvent(new CustomEvent("config-changed",{detail:{config:n._config}})),n.render()});i.appendChild(o),i.appendChild(c),a.appendChild(i)});var u=this._createButton("Add Light",function(){n._config.entities.push({entity_id:""}),n.dispatchEvent(new CustomEvent("config-changed",{detail:{config:n._config}})),n.render()});a.appendChild(u),r.appendChild(a),this.appendChild(r)}}],r&&U(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(u);function q(t){return q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},q(t)}function G(t){return function(t){if(Array.isArray(t))return J(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return J(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?J(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function J(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function K(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function Q(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?K(Object(n),!0).forEach(function(e){X(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):K(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function X(t,e,n){return(e=tt(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Z(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,tt(r.key),r)}}function tt(t){var e=function(t){if("object"!=q(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=q(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==q(e)?e:e+""}function et(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(et=function(){return!!t})()}function nt(t){return nt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},nt(t)}function rt(t,e){return rt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},rt(t,e)}var it=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=function(t,e,n){return e=nt(e),function(t,e){if(e&&("object"==q(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,et()?Reflect.construct(e,n||[],nt(t).constructor):e.apply(t,n))}(this,e))._translations={zh:Q(Q({},t._translations.zh),{},{speed:"速度",oscillate:"摆动",direction:"方向"}),en:Q(Q({},t._translations.en),{},{speed:"Speed",oscillate:"Oscillate",direction:"Direction"})},t.addEventListener("config-changed",function(e){t.setConfig(e.detail.config)}),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&rt(t,e)}(e,t),n=e,r=[{key:"setConfig",value:function(t){this._config=Q(Q({},t),{},{fan_name:t.fan_name||("zh"===this._language?"未命名风扇":"Unnamed Fan"),entities:Array.isArray(null==t?void 0:t.entities)?G(t.entities):[],icon_path:t.icon_path||"/local/community/RosCard/icon_img/icon_fan.png"}),this._hass&&this.render()}},{key:"hass",set:function(t){this._hass=t,this.firstRender&&(this._config&&this.render(),this.firstRender=!1)}},{key:"render",value:function(){var t=this;if(this._hass){this.innerHTML="";var e=document.createElement("ha-card");e.header=this._translations[this._language].cardTitle(this._config.fan_name),e.appendChild(this._createIcon(this._config.icon_path));var n=document.createElement("div");n.style.padding="16px",n.style.position="relative",n.innerHTML="<h3>".concat(this._translations[this._language].controlPanelTitle,"</h3>"),Array.isArray(this._config.entities)&&this._config.entities.length>0&&this._config.entities.forEach(function(e){if(e.entity_id&&e.entity_id.startsWith("fan.")){var r,i,o=document.createElement("div");o.style.marginBottom="12px",o.style.padding="8px",o.style.border="1px solid #ddd",o.style.borderRadius="4px";var a=t._hass.states[e.entity_id],c="on"===(null==a?void 0:a.state)?t._translations[t._language].stateOn:t._translations[t._language].stateOff;o.innerHTML='<div style="margin-bottom: 8px;"><strong>'.concat(e.entity_id,"</strong> - ").concat(c,"</div>");var u=t._createButton("on"===(null==a?void 0:a.state)?"Off":"On",function(){var n="on"===(null==a?void 0:a.state)?"turn_off":"turn_on";t._hass.callService("fan",n,{entity_id:e.entity_id})});if(o.appendChild(u),void 0!==(null==a||null===(r=a.attributes)||void 0===r?void 0:r.percentage)){var l=document.createElement("input");l.type="range",l.min="0",l.max="100",l.value=a.attributes.percentage||0,l.style.width="100%",l.style.marginTop="8px",l.addEventListener("change",function(n){t._hass.callService("fan","set_percentage",{entity_id:e.entity_id,percentage:parseInt(n.target.value)})}),o.appendChild(l)}if(void 0!==(null==a||null===(i=a.attributes)||void 0===i?void 0:i.oscillating)){var s=t._createButton(a.attributes.oscillating?"Stop Oscillate":"Start Oscillate",function(){t._hass.callService("fan","oscillate",{entity_id:e.entity_id,oscillating:!a.attributes.oscillating})});o.appendChild(s)}n.appendChild(o)}}),e.appendChild(n),this.appendChild(e)}}},{key:"getCardSize",value:function(){return 4}}],r&&Z(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(u);function ot(t){return ot="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ot(t)}function at(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,ct(r.key),r)}}function ct(t){var e=function(t){if("object"!=ot(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=ot(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==ot(e)?e:e+""}function ut(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(ut=function(){return!!t})()}function lt(t){return lt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},lt(t)}function st(t,e){return st=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},st(t,e)}var ft=function(){function t(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),function(t,e,n){return e=lt(e),function(t,e){if(e&&("object"==ot(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,ut()?Reflect.construct(e,n||[],lt(t).constructor):e.apply(t,n))}(this,t,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&st(t,e)}(t,AiksControlBase),e=t,n=[{key:"setConfig",value:function(t){this._config=t||{},this.render()}},{key:"hass",set:function(t){this._hass=t}},{key:"render",value:function(){var t,e,n=this;this.innerHTML="";var r=document.createElement("div");r.style.padding="16px";var i=document.createElement("label");i.style.display="block",i.style.marginBottom="8px",i.innerText="风扇名称:";var o=document.createElement("input");o.type="text",o.value=(null===(t=this._config)||void 0===t?void 0:t.fan_name)||"",o.style.width="100%",o.style.padding="8px",o.style.boxSizing="border-box",o.addEventListener("change",function(t){n._config.fan_name=t.target.value,n.dispatchEvent(new CustomEvent("config-changed",{detail:{config:n._config}}))}),r.appendChild(i),r.appendChild(o);var a=document.createElement("div");a.style.marginTop="16px";var c=document.createElement("h4");c.innerText="Fan Entities",a.appendChild(c),Array.isArray(null===(e=this._config)||void 0===e?void 0:e.entities)||(this._config.entities=[]),this._config.entities.forEach(function(t,e){var r,i=document.createElement("div");i.style.marginBottom="8px",i.style.display="flex",i.style.gap="8px";var o=document.createElement("select");o.style.flex="1",o.innerHTML='<option value="">Select Fan Entity</option>',Object.keys((null===(r=n._hass)||void 0===r?void 0:r.states)||{}).filter(function(t){return t.startsWith("fan.")}).forEach(function(e){var n=document.createElement("option");n.value=e,n.text=e,e===t.entity_id&&(n.selected=!0),o.appendChild(n)}),o.addEventListener("change",function(t){n._config.entities[e].entity_id=t.target.value,n.dispatchEvent(new CustomEvent("config-changed",{detail:{config:n._config}}))});var c=n._createButton("Delete",function(){n._config.entities.splice(e,1),n.dispatchEvent(new CustomEvent("config-changed",{detail:{config:n._config}})),n.render()});i.appendChild(o),i.appendChild(c),a.appendChild(i)});var u=this._createButton("Add Fan",function(){n._config.entities.push({entity_id:""}),n.dispatchEvent(new CustomEvent("config-changed",{detail:{config:n._config}})),n.render()});a.appendChild(u),r.appendChild(a),this.appendChild(r)}}],n&&at(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,n}();function pt(t){return pt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},pt(t)}function dt(t){return function(t){if(Array.isArray(t))return yt(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return yt(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?yt(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function yt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function ht(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function vt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ht(Object(n),!0).forEach(function(e){mt(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ht(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function mt(t,e,n){return(e=gt(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function bt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,gt(r.key),r)}}function gt(t){var e=function(t){if("object"!=pt(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=pt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==pt(e)?e:e+""}function _t(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(_t=function(){return!!t})()}function Ot(t){return Ot=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Ot(t)}function wt(t,e){return wt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},wt(t,e)}var Et=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=function(t,e,n){return e=Ot(e),function(t,e){if(e&&("object"==pt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,_t()?Reflect.construct(e,n||[],Ot(t).constructor):e.apply(t,n))}(this,e)).addEventListener("config-changed",function(e){t.setConfig(e.detail.config)}),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&wt(t,e)}(e,t),n=e,(r=[{key:"setConfig",value:function(t){this._config=vt(vt({},t),{},{scene_name:t.scene_name||("zh"===this._language?"未命名场景":"Unnamed Scene"),entities:Array.isArray(null==t?void 0:t.entities)?dt(t.entities):[],icon_path:t.icon_path||"/local/community/RosCard/icon_img/icon_scene.png"}),this._hass&&this.render()}},{key:"hass",set:function(t){this._hass=t,this.firstRender&&(this._config&&this.render(),this.firstRender=!1)}},{key:"render",value:function(){var t=this;if(this._hass){this.innerHTML="";var e=document.createElement("ha-card");e.header=this._translations[this._language].cardTitle(this._config.scene_name),e.appendChild(this._createIcon(this._config.icon_path));var n=document.createElement("div");n.style.padding="16px",n.style.position="relative",n.innerHTML="<h3>".concat(this._translations[this._language].controlPanelTitle,"</h3>"),Array.isArray(this._config.entities)&&this._config.entities.length>0&&this._config.entities.forEach(function(e){if(e.entity_id&&e.entity_id.startsWith("scene.")){var r=document.createElement("div");r.style.marginBottom="8px";var i=t._createButton(e.scene_name||e.entity_id,function(){t._hass.callService("scene","turn_on",{entity_id:e.entity_id})});i.style.width="100%",i.style.padding="12px",r.appendChild(i),n.appendChild(r)}}),e.appendChild(n),this.appendChild(e)}}},{key:"getCardSize",value:function(){return 4}}])&&bt(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(u);function jt(t){return jt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},jt(t)}function St(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Pt(r.key),r)}}function Pt(t){var e=function(t){if("object"!=jt(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=jt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==jt(e)?e:e+""}function Ct(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(Ct=function(){return!!t})()}function xt(t){return xt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},xt(t)}function Tt(t,e){return Tt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Tt(t,e)}var kt=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e,n){return e=xt(e),function(t,e){if(e&&("object"==jt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Ct()?Reflect.construct(e,n||[],xt(t).constructor):e.apply(t,n))}(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Tt(t,e)}(e,t),n=e,r=[{key:"setConfig",value:function(t){this._config=t||{},this.render()}},{key:"hass",set:function(t){this._hass=t}},{key:"render",value:function(){var t,e,n=this;this.innerHTML="";var r=document.createElement("div");r.style.padding="16px";var i=document.createElement("label");i.style.display="block",i.style.marginBottom="8px",i.innerText="场景名称:";var o=document.createElement("input");o.type="text",o.value=(null===(t=this._config)||void 0===t?void 0:t.scene_name)||"",o.style.width="100%",o.style.padding="8px",o.style.boxSizing="border-box",o.addEventListener("change",function(t){n._config.scene_name=t.target.value,n.dispatchEvent(new CustomEvent("config-changed",{detail:{config:n._config}}))}),r.appendChild(i),r.appendChild(o);var a=document.createElement("div");a.style.marginTop="16px";var c=document.createElement("h4");c.innerText="Scenes",a.appendChild(c),Array.isArray(null===(e=this._config)||void 0===e?void 0:e.entities)||(this._config.entities=[]),this._config.entities.forEach(function(t,e){var r,i=document.createElement("div");i.style.marginBottom="8px",i.style.display="flex",i.style.gap="8px";var o=document.createElement("select");o.style.flex="1",o.innerHTML='<option value="">Select Scene</option>',Object.keys((null===(r=n._hass)||void 0===r?void 0:r.states)||{}).filter(function(t){return t.startsWith("scene.")}).forEach(function(e){var n=document.createElement("option");n.value=e,n.text=e,e===t.entity_id&&(n.selected=!0),o.appendChild(n)}),o.addEventListener("change",function(t){n._config.entities[e].entity_id=t.target.value,n.dispatchEvent(new CustomEvent("config-changed",{detail:{config:n._config}}))});var c=n._createButton("Delete",function(){n._config.entities.splice(e,1),n.dispatchEvent(new CustomEvent("config-changed",{detail:{config:n._config}})),n.render()});i.appendChild(o),i.appendChild(c),a.appendChild(i)});var u=this._createButton("Add Scene",function(){n._config.entities.push({entity_id:""}),n.dispatchEvent(new CustomEvent("config-changed",{detail:{config:n._config}})),n.render()});a.appendChild(u),r.appendChild(a),this.appendChild(r)}}],r&&St(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(u);function At(t){return At="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},At(t)}function Rt(t){return function(t){if(Array.isArray(t))return Bt(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return Bt(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Bt(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Bt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function Lt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function Dt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Lt(Object(n),!0).forEach(function(e){Mt(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Lt(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function Mt(t,e,n){return(e=Ht(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function zt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Ht(r.key),r)}}function Ht(t){var e=function(t){if("object"!=At(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=At(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==At(e)?e:e+""}function It(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(It=function(){return!!t})()}function Wt(t){return Wt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Wt(t)}function Ut(t,e){return Ut=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Ut(t,e)}var $t=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=function(t,e,n){return e=Wt(e),function(t,e){if(e&&("object"==At(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,It()?Reflect.construct(e,n||[],Wt(t).constructor):e.apply(t,n))}(this,e)).addEventListener("config-changed",function(e){t.setConfig(e.detail.config)}),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ut(t,e)}(e,t),n=e,(r=[{key:"setConfig",value:function(t){this._config=Dt(Dt({},t),{},{media_name:t.media_name||("zh"===this._language?"未命名播放器":"Unnamed Player"),entities:Array.isArray(null==t?void 0:t.entities)?Rt(t.entities):[],icon_path:t.icon_path||"/local/community/RosCard/icon_img/icon_media_play1.png"}),this._hass&&this.render()}},{key:"hass",set:function(t){this._hass=t,this.firstRender&&(this._config&&this.render(),this.firstRender=!1)}},{key:"render",value:function(){var t=this;if(this._hass){this.innerHTML="";var e=document.createElement("ha-card");e.header=this._translations[this._language].cardTitle(this._config.media_name),e.appendChild(this._createIcon(this._config.icon_path));var n=document.createElement("div");n.style.padding="16px",n.style.position="relative",n.innerHTML="<h3>".concat(this._translations[this._language].controlPanelTitle,"</h3>"),Array.isArray(this._config.entities)&&this._config.entities.length>0&&this._config.entities.forEach(function(e){if(e.entity_id&&e.entity_id.startsWith("media_player.")){var r=t._hass.states[e.entity_id],i=document.createElement("div");i.style.marginBottom="12px",i.style.padding="8px",i.style.border="1px solid #ddd",i.style.borderRadius="4px",i.innerHTML='<div style="margin-bottom: 8px;"><strong>'.concat(e.entity_id,"</strong> - ").concat((null==r?void 0:r.state)||"unknown","</div>");var o=t._createButton("Play",function(){t._hass.callService("media_player","media_play",{entity_id:e.entity_id})}),a=t._createButton("Pause",function(){t._hass.callService("media_player","media_pause",{entity_id:e.entity_id})}),c=t._createButton("Stop",function(){t._hass.callService("media_player","media_stop",{entity_id:e.entity_id})});i.appendChild(o),i.appendChild(a),i.appendChild(c),n.appendChild(i)}}),e.appendChild(n),this.appendChild(e)}}},{key:"getCardSize",value:function(){return 4}}])&&zt(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(u);function Ft(t){return Ft="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ft(t)}function Vt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Nt(r.key),r)}}function Nt(t){var e=function(t){if("object"!=Ft(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=Ft(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Ft(e)?e:e+""}function Yt(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(Yt=function(){return!!t})()}function qt(t){return qt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},qt(t)}function Gt(t,e){return Gt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Gt(t,e)}var Jt=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e,n){return e=qt(e),function(t,e){if(e&&("object"==Ft(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Yt()?Reflect.construct(e,n||[],qt(t).constructor):e.apply(t,n))}(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Gt(t,e)}(e,t),n=e,r=[{key:"setConfig",value:function(t){this._config=t||{},this.render()}},{key:"hass",set:function(t){this._hass=t}},{key:"render",value:function(){var t,e,n=this;this.innerHTML="";var r=document.createElement("div");r.style.padding="16px";var i=document.createElement("label");i.style.display="block",i.style.marginBottom="8px",i.innerText="播放器名称:";var o=document.createElement("input");o.type="text",o.value=(null===(t=this._config)||void 0===t?void 0:t.media_name)||"",o.style.width="100%",o.style.padding="8px",o.style.boxSizing="border-box",o.addEventListener("change",function(t){n._config.media_name=t.target.value,n.dispatchEvent(new CustomEvent("config-changed",{detail:{config:n._config}}))}),r.appendChild(i),r.appendChild(o);var a=document.createElement("div");a.style.marginTop="16px";var c=document.createElement("h4");c.innerText="Media Players",a.appendChild(c),Array.isArray(null===(e=this._config)||void 0===e?void 0:e.entities)||(this._config.entities=[]),this._config.entities.forEach(function(t,e){var r,i=document.createElement("div");i.style.marginBottom="8px",i.style.display="flex",i.style.gap="8px";var o=document.createElement("select");o.style.flex="1",o.innerHTML='<option value="">Select Media Player</option>',Object.keys((null===(r=n._hass)||void 0===r?void 0:r.states)||{}).filter(function(t){return t.startsWith("media_player.")}).forEach(function(e){var n=document.createElement("option");n.value=e,n.text=e,e===t.entity_id&&(n.selected=!0),o.appendChild(n)}),o.addEventListener("change",function(t){n._config.entities[e].entity_id=t.target.value,n.dispatchEvent(new CustomEvent("config-changed",{detail:{config:n._config}}))});var c=n._createButton("Delete",function(){n._config.entities.splice(e,1),n.dispatchEvent(new CustomEvent("config-changed",{detail:{config:n._config}})),n.render()});i.appendChild(o),i.appendChild(c),a.appendChild(i)});var u=this._createButton("Add Media Player",function(){n._config.entities.push({entity_id:""}),n.dispatchEvent(new CustomEvent("config-changed",{detail:{config:n._config}})),n.render()});a.appendChild(u),r.appendChild(a),this.appendChild(r)}}],r&&Vt(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(u);function Kt(t){return Kt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Kt(t)}function Qt(t){return function(t){if(Array.isArray(t))return Xt(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return Xt(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Xt(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Xt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function Zt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function te(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Zt(Object(n),!0).forEach(function(e){ee(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Zt(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function ee(t,e,n){return(e=re(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ne(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,re(r.key),r)}}function re(t){var e=function(t){if("object"!=Kt(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=Kt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Kt(e)?e:e+""}function ie(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(ie=function(){return!!t})()}function oe(t){return oe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},oe(t)}function ae(t,e){return ae=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},ae(t,e)}var ce=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=function(t,e,n){return e=oe(e),function(t,e){if(e&&("object"==Kt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,ie()?Reflect.construct(e,n||[],oe(t).constructor):e.apply(t,n))}(this,e))._translations={zh:te(te({},t._translations.zh),{},{temperature:"温度",humidity:"湿度",mode:"模式"}),en:te(te({},t._translations.en),{},{temperature:"Temperature",humidity:"Humidity",mode:"Mode"})},t.addEventListener("config-changed",function(e){t.setConfig(e.detail.config)}),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ae(t,e)}(e,t),n=e,(r=[{key:"setConfig",value:function(t){this._config=te(te({},t),{},{climate_name:t.climate_name||("zh"===this._language?"未命名空调":"Unnamed AC"),entities:Array.isArray(null==t?void 0:t.entities)?Qt(t.entities):[],icon_path:t.icon_path||"/local/community/RosCard/icon_img/icon_climate.png"}),this._hass&&this.render()}},{key:"hass",set:function(t){this._hass=t,this.firstRender&&(this._config&&this.render(),this.firstRender=!1)}},{key:"render",value:function(){var t=this;if(this._hass){this.innerHTML="";var e=document.createElement("ha-card");e.header=this._translations[this._language].cardTitle(this._config.climate_name),e.appendChild(this._createIcon(this._config.icon_path));var n=document.createElement("div");n.style.padding="16px",n.style.position="relative",n.innerHTML="<h3>".concat(this._translations[this._language].controlPanelTitle,"</h3>"),Array.isArray(this._config.entities)&&this._config.entities.length>0&&this._config.entities.forEach(function(e){if(e.entity_id&&e.entity_id.startsWith("climate.")){var r,i,o=t._hass.states[e.entity_id],a=document.createElement("div");a.style.marginBottom="12px",a.style.padding="8px",a.style.border="1px solid #ddd",a.style.borderRadius="4px";var c=(null==o||null===(r=o.attributes)||void 0===r?void 0:r.current_temperature)||"--",u=(null==o||null===(i=o.attributes)||void 0===i?void 0:i.temperature)||"--";a.innerHTML='\n            <div style="margin-bottom: 8px;">\n              <strong>'.concat(e.entity_id,"</strong><br/>\n              ").concat(t._translations[t._language].temperature,": ").concat(c,"°C → ").concat(u,"°C\n            </div>\n          ");var l=t._createButton("On",function(){t._hass.callService("climate","turn_on",{entity_id:e.entity_id})}),s=t._createButton("Off",function(){t._hass.callService("climate","turn_off",{entity_id:e.entity_id})});a.appendChild(l),a.appendChild(s),n.appendChild(a)}}),e.appendChild(n),this.appendChild(e)}}},{key:"getCardSize",value:function(){return 4}}])&&ne(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(u);function ue(t){return ue="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ue(t)}function le(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,se(r.key),r)}}function se(t){var e=function(t){if("object"!=ue(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=ue(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==ue(e)?e:e+""}function fe(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(fe=function(){return!!t})()}function pe(t){return pe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},pe(t)}function de(t,e){return de=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},de(t,e)}var ye=function(){function t(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),function(t,e,n){return e=pe(e),function(t,e){if(e&&("object"==ue(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,fe()?Reflect.construct(e,n||[],pe(t).constructor):e.apply(t,n))}(this,t,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&de(t,e)}(t,AiksControlBase),e=t,n=[{key:"setConfig",value:function(t){this._config=t||{},this.render()}},{key:"hass",set:function(t){this._hass=t}},{key:"render",value:function(){var t,e,n=this;this.innerHTML="";var r=document.createElement("div");r.style.padding="16px";var i=document.createElement("label");i.style.display="block",i.style.marginBottom="8px",i.innerText="空调名称:";var o=document.createElement("input");o.type="text",o.value=(null===(t=this._config)||void 0===t?void 0:t.climate_name)||"",o.style.width="100%",o.style.padding="8px",o.style.boxSizing="border-box",o.addEventListener("change",function(t){n._config.climate_name=t.target.value,n.dispatchEvent(new CustomEvent("config-changed",{detail:{config:n._config}}))}),r.appendChild(i),r.appendChild(o);var a=document.createElement("div");a.style.marginTop="16px";var c=document.createElement("h4");c.innerText="Climate Entities",a.appendChild(c),Array.isArray(null===(e=this._config)||void 0===e?void 0:e.entities)||(this._config.entities=[]),this._config.entities.forEach(function(t,e){var r,i=document.createElement("div");i.style.marginBottom="8px",i.style.display="flex",i.style.gap="8px";var o=document.createElement("select");o.style.flex="1",o.innerHTML='<option value="">Select Climate Entity</option>',Object.keys((null===(r=n._hass)||void 0===r?void 0:r.states)||{}).filter(function(t){return t.startsWith("climate.")}).forEach(function(e){var n=document.createElement("option");n.value=e,n.text=e,e===t.entity_id&&(n.selected=!0),o.appendChild(n)}),o.addEventListener("change",function(t){n._config.entities[e].entity_id=t.target.value,n.dispatchEvent(new CustomEvent("config-changed",{detail:{config:n._config}}))});var c=n._createButton("Delete",function(){n._config.entities.splice(e,1),n.dispatchEvent(new CustomEvent("config-changed",{detail:{config:n._config}})),n.render()});i.appendChild(o),i.appendChild(c),a.appendChild(i)});var u=this._createButton("Add Climate",function(){n._config.entities.push({entity_id:""}),n.dispatchEvent(new CustomEvent("config-changed",{detail:{config:n._config}})),n.render()});a.appendChild(u),r.appendChild(a),this.appendChild(r)}}],n&&le(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,n}();function he(t){return he="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},he(t)}function ve(t){return function(t){if(Array.isArray(t))return me(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return me(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?me(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function me(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function be(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function ge(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?be(Object(n),!0).forEach(function(e){_e(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):be(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function _e(t,e,n){return(e=we(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Oe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,we(r.key),r)}}function we(t){var e=function(t){if("object"!=he(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=he(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==he(e)?e:e+""}function Ee(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(Ee=function(){return!!t})()}function je(t){return je=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},je(t)}function Se(t,e){return Se=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Se(t,e)}var Pe=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=function(t,e,n){return e=je(e),function(t,e){if(e&&("object"==he(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Ee()?Reflect.construct(e,n||[],je(t).constructor):e.apply(t,n))}(this,e)).addEventListener("config-changed",function(e){t.setConfig(e.detail.config)}),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Se(t,e)}(e,t),n=e,r=[{key:"setConfig",value:function(t){this._config=ge(ge({},t),{},{cover_name:t.cover_name||("zh"===this._language?"未命名窗帘":"Unnamed Cover"),entities:Array.isArray(null==t?void 0:t.entities)?ve(t.entities):[],icon_path:t.icon_path||"/local/community/RosCard/icon_img/icon_cover.png"}),this._hass&&this.render()}},{key:"hass",set:function(t){this._hass=t,this.firstRender&&(this._config&&this.render(),this.firstRender=!1)}},{key:"render",value:function(){var t=this;if(this._hass){this.innerHTML="";var e=document.createElement("ha-card");e.header=this._translations[this._language].cardTitle(this._config.cover_name),e.appendChild(this._createIcon(this._config.icon_path));var n=document.createElement("div");n.style.padding="16px",n.style.position="relative",n.innerHTML="<h3>".concat(this._translations[this._language].controlPanelTitle,"</h3>"),Array.isArray(this._config.entities)&&this._config.entities.length>0&&this._config.entities.forEach(function(e){if(e.entity_id&&e.entity_id.startsWith("cover.")){var r,i,o=t._hass.states[e.entity_id],a=document.createElement("div");a.style.marginBottom="12px",a.style.padding="8px",a.style.border="1px solid #ddd",a.style.borderRadius="4px";var c=(null==o||null===(r=o.attributes)||void 0===r?void 0:r.current_position)||0;a.innerHTML='<div style="margin-bottom: 8px;"><strong>'.concat(e.entity_id,"</strong> - Position: ").concat(c,"%</div>");var u=t._createButton("Open",function(){t._hass.callService("cover","open_cover",{entity_id:e.entity_id})}),l=t._createButton("Close",function(){t._hass.callService("cover","close_cover",{entity_id:e.entity_id})}),s=t._createButton("Stop",function(){t._hass.callService("cover","stop_cover",{entity_id:e.entity_id})});if(a.appendChild(u),a.appendChild(l),a.appendChild(s),void 0!==(null==o||null===(i=o.attributes)||void 0===i?void 0:i.current_position)){var f=document.createElement("input");f.type="range",f.min="0",f.max="100",f.value=c,f.style.width="100%",f.style.marginTop="8px",f.addEventListener("change",function(n){t._hass.callService("cover","set_cover_position",{entity_id:e.entity_id,position:parseInt(n.target.value)})}),a.appendChild(f)}n.appendChild(a)}}),e.appendChild(n),this.appendChild(e)}}},{key:"getCardSize",value:function(){return 4}}],r&&Oe(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(u);function Ce(t){return Ce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ce(t)}function xe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Te(r.key),r)}}function Te(t){var e=function(t){if("object"!=Ce(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=Ce(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Ce(e)?e:e+""}function ke(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(ke=function(){return!!t})()}function Ae(t){return Ae=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Ae(t)}function Re(t,e){return Re=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Re(t,e)}var Be=function(){function t(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),function(t,e,n){return e=Ae(e),function(t,e){if(e&&("object"==Ce(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,ke()?Reflect.construct(e,n||[],Ae(t).constructor):e.apply(t,n))}(this,t,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Re(t,e)}(t,AiksControlBase),e=t,n=[{key:"setConfig",value:function(t){this._config=t||{},this.render()}},{key:"hass",set:function(t){this._hass=t}},{key:"render",value:function(){var t,e,n=this;this.innerHTML="";var r=document.createElement("div");r.style.padding="16px";var i=document.createElement("label");i.style.display="block",i.style.marginBottom="8px",i.innerText="窗帘名称:";var o=document.createElement("input");o.type="text",o.value=(null===(t=this._config)||void 0===t?void 0:t.cover_name)||"",o.style.width="100%",o.style.padding="8px",o.style.boxSizing="border-box",o.addEventListener("change",function(t){n._config.cover_name=t.target.value,n.dispatchEvent(new CustomEvent("config-changed",{detail:{config:n._config}}))}),r.appendChild(i),r.appendChild(o);var a=document.createElement("div");a.style.marginTop="16px";var c=document.createElement("h4");c.innerText="Cover Entities",a.appendChild(c),Array.isArray(null===(e=this._config)||void 0===e?void 0:e.entities)||(this._config.entities=[]),this._config.entities.forEach(function(t,e){var r,i=document.createElement("div");i.style.marginBottom="8px",i.style.display="flex",i.style.gap="8px";var o=document.createElement("select");o.style.flex="1",o.innerHTML='<option value="">Select Cover Entity</option>',Object.keys((null===(r=n._hass)||void 0===r?void 0:r.states)||{}).filter(function(t){return t.startsWith("cover.")}).forEach(function(e){var n=document.createElement("option");n.value=e,n.text=e,e===t.entity_id&&(n.selected=!0),o.appendChild(n)}),o.addEventListener("change",function(t){n._config.entities[e].entity_id=t.target.value,n.dispatchEvent(new CustomEvent("config-changed",{detail:{config:n._config}}))});var c=n._createButton("Delete",function(){n._config.entities.splice(e,1),n.dispatchEvent(new CustomEvent("config-changed",{detail:{config:n._config}})),n.render()});i.appendChild(o),i.appendChild(c),a.appendChild(i)});var u=this._createButton("Add Cover",function(){n._config.entities.push({entity_id:""}),n.dispatchEvent(new CustomEvent("config-changed",{detail:{config:n._config}})),n.render()});a.appendChild(u),r.appendChild(a),this.appendChild(r)}}],n&&xe(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,n}();function Le(t){return Le="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Le(t)}function De(t){return function(t){if(Array.isArray(t))return Me(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return Me(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Me(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Me(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function ze(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function He(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ze(Object(n),!0).forEach(function(e){Ie(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ze(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function Ie(t,e,n){return(e=Ue(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function We(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Ue(r.key),r)}}function Ue(t){var e=function(t){if("object"!=Le(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=Le(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Le(e)?e:e+""}function $e(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return($e=function(){return!!t})()}function Fe(t){return Fe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Fe(t)}function Ve(t,e){return Ve=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Ve(t,e)}var Ne=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=function(t,e,n){return e=Fe(e),function(t,e){if(e&&("object"==Le(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,$e()?Reflect.construct(e,n||[],Fe(t).constructor):e.apply(t,n))}(this,e)).addEventListener("config-changed",function(e){t.setConfig(e.detail.config)}),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ve(t,e)}(e,t),n=e,(r=[{key:"setConfig",value:function(t){this._config=He(He({},t),{},{switch_name:t.switch_name||("zh"===this._language?"未命名开关":"Unnamed Switch"),entities:Array.isArray(null==t?void 0:t.entities)?De(t.entities):[],icon_path:t.icon_path||"/local/community/RosCard/icon_img/icon_switch.png"}),this._hass&&this.render()}},{key:"hass",set:function(t){this._hass=t,this.firstRender&&(this._config&&this.render(),this.firstRender=!1)}},{key:"render",value:function(){var t=this;if(this._hass){this.innerHTML="";var e=document.createElement("ha-card");e.header=this._translations[this._language].cardTitle(this._config.switch_name),e.appendChild(this._createIcon(this._config.icon_path));var n=document.createElement("div");n.style.padding="16px",n.style.position="relative",n.innerHTML="<h3>".concat(this._translations[this._language].controlPanelTitle,"</h3>"),Array.isArray(this._config.entities)&&this._config.entities.length>0&&this._config.entities.forEach(function(e){if(e.entity_id&&e.entity_id.startsWith("switch.")){var r=t._hass.states[e.entity_id],i=document.createElement("div");i.style.marginBottom="8px";var o="on"===(null==r?void 0:r.state)?t._translations[t._language].stateOn:t._translations[t._language].stateOff,a=t._createButton("".concat(e.entity_id,": ").concat(o),function(){var n="on"===(null==r?void 0:r.state)?"turn_off":"turn_on";t._hass.callService("switch",n,{entity_id:e.entity_id})});a.style.width="100%",a.style.padding="12px",i.appendChild(a),n.appendChild(i)}}),e.appendChild(n),this.appendChild(e)}}},{key:"getCardSize",value:function(){return 4}}])&&We(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(u);function Ye(t){return Ye="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ye(t)}function qe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Ge(r.key),r)}}function Ge(t){var e=function(t){if("object"!=Ye(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=Ye(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Ye(e)?e:e+""}function Je(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(Je=function(){return!!t})()}function Ke(t){return Ke=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Ke(t)}function Qe(t,e){return Qe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Qe(t,e)}var Xe=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e,n){return e=Ke(e),function(t,e){if(e&&("object"==Ye(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Je()?Reflect.construct(e,n||[],Ke(t).constructor):e.apply(t,n))}(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Qe(t,e)}(e,t),n=e,r=[{key:"setConfig",value:function(t){this._config=t||{},this.render()}},{key:"hass",set:function(t){this._hass=t}},{key:"render",value:function(){var t,e,n=this;this.innerHTML="";var r=document.createElement("div");r.style.padding="16px";var i=document.createElement("label");i.style.display="block",i.style.marginBottom="8px",i.innerText="开关名称:";var o=document.createElement("input");o.type="text",o.value=(null===(t=this._config)||void 0===t?void 0:t.switch_name)||"",o.style.width="100%",o.style.padding="8px",o.style.boxSizing="border-box",o.addEventListener("change",function(t){n._config.switch_name=t.target.value,n.dispatchEvent(new CustomEvent("config-changed",{detail:{config:n._config}}))}),r.appendChild(i),r.appendChild(o);var a=document.createElement("div");a.style.marginTop="16px";var c=document.createElement("h4");c.innerText="Switch Entities",a.appendChild(c),Array.isArray(null===(e=this._config)||void 0===e?void 0:e.entities)||(this._config.entities=[]),this._config.entities.forEach(function(t,e){var r,i=document.createElement("div");i.style.marginBottom="8px",i.style.display="flex",i.style.gap="8px";var o=document.createElement("select");o.style.flex="1",o.innerHTML='<option value="">Select Switch Entity</option>',Object.keys((null===(r=n._hass)||void 0===r?void 0:r.states)||{}).filter(function(t){return t.startsWith("switch.")}).forEach(function(e){var n=document.createElement("option");n.value=e,n.text=e,e===t.entity_id&&(n.selected=!0),o.appendChild(n)}),o.addEventListener("change",function(t){n._config.entities[e].entity_id=t.target.value,n.dispatchEvent(new CustomEvent("config-changed",{detail:{config:n._config}}))});var c=n._createButton("Delete",function(){n._config.entities.splice(e,1),n.dispatchEvent(new CustomEvent("config-changed",{detail:{config:n._config}})),n.render()});i.appendChild(o),i.appendChild(c),a.appendChild(i)});var u=this._createButton("Add Switch",function(){n._config.entities.push({entity_id:""}),n.dispatchEvent(new CustomEvent("config-changed",{detail:{config:n._config}})),n.render()});a.appendChild(u),r.appendChild(a),this.appendChild(r)}}],r&&qe(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(u);function Ze(t){return Ze="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ze(t)}function tn(t){return function(t){if(Array.isArray(t))return en(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return en(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?en(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function en(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function nn(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function rn(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?nn(Object(n),!0).forEach(function(e){on(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):nn(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function on(t,e,n){return(e=cn(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function an(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,cn(r.key),r)}}function cn(t){var e=function(t){if("object"!=Ze(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=Ze(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Ze(e)?e:e+""}function un(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(un=function(){return!!t})()}function ln(t){return ln=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},ln(t)}function sn(t,e){return sn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},sn(t,e)}var fn=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=function(t,e,n){return e=ln(e),function(t,e){if(e&&("object"==Ze(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,un()?Reflect.construct(e,n||[],ln(t).constructor):e.apply(t,n))}(this,e)).addEventListener("config-changed",function(e){t.setConfig(e.detail.config)}),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&sn(t,e)}(e,t),n=e,(r=[{key:"setConfig",value:function(t){this._config=rn(rn({},t),{},{weather_name:t.weather_name||("zh"===this._language?"未命名天气":"Unnamed Weather"),entities:Array.isArray(null==t?void 0:t.entities)?tn(t.entities):[],icon_path:t.icon_path||"/local/community/RosCard/icon_img/icon_weather.png"}),this._hass&&this.render()}},{key:"hass",set:function(t){this._hass=t,this.firstRender&&(this._config&&this.render(),this.firstRender=!1)}},{key:"render",value:function(){var t=this;if(this._hass){this.innerHTML="";var e=document.createElement("ha-card");e.header=this._translations[this._language].cardTitle(this._config.weather_name),e.appendChild(this._createIcon(this._config.icon_path));var n=document.createElement("div");n.style.padding="16px",n.style.position="relative",n.innerHTML="<h3>".concat(this._translations[this._language].controlPanelTitle,"</h3>"),Array.isArray(this._config.entities)&&this._config.entities.length>0&&this._config.entities.forEach(function(e){if(e.entity_id&&e.entity_id.startsWith("weather.")){var r,i,o=t._hass.states[e.entity_id],a=document.createElement("div");a.style.marginBottom="12px",a.style.padding="8px",a.style.border="1px solid #ddd",a.style.borderRadius="4px";var c=(null==o||null===(r=o.attributes)||void 0===r?void 0:r.temperature)||"--",u=(null==o||null===(i=o.attributes)||void 0===i?void 0:i.humidity)||"--",l=(null==o?void 0:o.state)||"unknown";a.innerHTML='\n            <div style="margin-bottom: 8px;">\n              <strong>'.concat(e.entity_id,"</strong><br/>\n              状况: ").concat(l,"<br/>\n              温度: ").concat(c,"°C<br/>\n              湿度: ").concat(u,"%\n            </div>\n          "),n.appendChild(a)}}),e.appendChild(n),this.appendChild(e)}}},{key:"getCardSize",value:function(){return 4}}])&&an(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(u);function pn(t){return pn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},pn(t)}function dn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,yn(r.key),r)}}function yn(t){var e=function(t){if("object"!=pn(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=pn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==pn(e)?e:e+""}function hn(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(hn=function(){return!!t})()}function vn(t){return vn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},vn(t)}function mn(t,e){return mn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},mn(t,e)}var bn=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e,n){return e=vn(e),function(t,e){if(e&&("object"==pn(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,hn()?Reflect.construct(e,n||[],vn(t).constructor):e.apply(t,n))}(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&mn(t,e)}(e,t),n=e,r=[{key:"setConfig",value:function(t){this._config=t||{},this.render()}},{key:"hass",set:function(t){this._hass=t}},{key:"render",value:function(){var t,e,n=this;this.innerHTML="";var r=document.createElement("div");r.style.padding="16px";var i=document.createElement("label");i.style.display="block",i.style.marginBottom="8px",i.innerText="天气名称:";var o=document.createElement("input");o.type="text",o.value=(null===(t=this._config)||void 0===t?void 0:t.weather_name)||"",o.style.width="100%",o.style.padding="8px",o.style.boxSizing="border-box",o.addEventListener("change",function(t){n._config.weather_name=t.target.value,n.dispatchEvent(new CustomEvent("config-changed",{detail:{config:n._config}}))}),r.appendChild(i),r.appendChild(o);var a=document.createElement("div");a.style.marginTop="16px";var c=document.createElement("h4");c.innerText="Weather Entities",a.appendChild(c),Array.isArray(null===(e=this._config)||void 0===e?void 0:e.entities)||(this._config.entities=[]),this._config.entities.forEach(function(t,e){var r,i=document.createElement("div");i.style.marginBottom="8px",i.style.display="flex",i.style.gap="8px";var o=document.createElement("select");o.style.flex="1",o.innerHTML='<option value="">Select Weather Entity</option>',Object.keys((null===(r=n._hass)||void 0===r?void 0:r.states)||{}).filter(function(t){return t.startsWith("weather.")}).forEach(function(e){var n=document.createElement("option");n.value=e,n.text=e,e===t.entity_id&&(n.selected=!0),o.appendChild(n)}),o.addEventListener("change",function(t){n._config.entities[e].entity_id=t.target.value,n.dispatchEvent(new CustomEvent("config-changed",{detail:{config:n._config}}))});var c=n._createButton("Delete",function(){n._config.entities.splice(e,1),n.dispatchEvent(new CustomEvent("config-changed",{detail:{config:n._config}})),n.render()});i.appendChild(o),i.appendChild(c),a.appendChild(i)});var u=this._createButton("Add Weather",function(){n._config.entities.push({entity_id:""}),n.dispatchEvent(new CustomEvent("config-changed",{detail:{config:n._config}})),n.render()});a.appendChild(u),r.appendChild(a),this.appendChild(r)}}],r&&dn(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(u);function gn(t){return gn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},gn(t)}function _n(t){return function(t){if(Array.isArray(t))return On(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return On(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?On(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function On(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function wn(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function En(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?wn(Object(n),!0).forEach(function(e){jn(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):wn(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function jn(t,e,n){return(e=Pn(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Sn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Pn(r.key),r)}}function Pn(t){var e=function(t){if("object"!=gn(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=gn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==gn(e)?e:e+""}function Cn(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(Cn=function(){return!!t})()}function xn(t){return xn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},xn(t)}function Tn(t,e){return Tn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Tn(t,e)}var kn=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=function(t,e,n){return e=xn(e),function(t,e){if(e&&("object"==gn(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Cn()?Reflect.construct(e,n||[],xn(t).constructor):e.apply(t,n))}(this,e)).addEventListener("config-changed",function(e){t.setConfig(e.detail.config)}),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Tn(t,e)}(e,t),n=e,(r=[{key:"setConfig",value:function(t){this._config=En(En({},t),{},{host_name:t.host_name||("zh"===this._language?"未命名主机":"Unnamed Host"),entities:Array.isArray(null==t?void 0:t.entities)?_n(t.entities):[],icon_path:t.icon_path||"/local/community/RosCard/icon_img/icon_host.png"}),this._hass&&this.render()}},{key:"hass",set:function(t){this._hass=t,this.firstRender&&(this._config&&this.render(),this.firstRender=!1)}},{key:"render",value:function(){var t=this;if(this._hass){this.innerHTML="";var e=document.createElement("ha-card");e.header=this._translations[this._language].cardTitle(this._config.host_name),e.appendChild(this._createIcon(this._config.icon_path));var n=document.createElement("div");n.style.padding="16px",n.style.position="relative",n.innerHTML="<h3>".concat(this._translations[this._language].controlPanelTitle,"</h3>"),Array.isArray(this._config.entities)&&this._config.entities.length>0&&this._config.entities.forEach(function(e){if(e.entity_id&&e.entity_id.startsWith("remote.")){t._hass.states[e.entity_id];var r=document.createElement("div");r.style.marginBottom="12px",r.style.padding="8px",r.style.border="1px solid #ddd",r.style.borderRadius="4px",r.innerHTML='<div style="margin-bottom: 8px;"><strong>'.concat(e.entity_id,"</strong></div>"),(e.commands||[]).forEach(function(n){var i=t._createButton(n.label||n,function(){t._hass.callService("remote","send_command",{entity_id:e.entity_id,command:n.value||n})});r.appendChild(i)}),n.appendChild(r)}}),e.appendChild(n),this.appendChild(e)}}},{key:"getCardSize",value:function(){return 4}}])&&Sn(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(u);function An(t){return An="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},An(t)}function Rn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Bn(r.key),r)}}function Bn(t){var e=function(t){if("object"!=An(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=An(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==An(e)?e:e+""}function Ln(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(Ln=function(){return!!t})()}function Dn(t){return Dn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Dn(t)}function Mn(t,e){return Mn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Mn(t,e)}var zn=function(){function t(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),function(t,e,n){return e=Dn(e),function(t,e){if(e&&("object"==An(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Ln()?Reflect.construct(e,n||[],Dn(t).constructor):e.apply(t,n))}(this,t,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Mn(t,e)}(t,AiksControlBase),e=t,n=[{key:"setConfig",value:function(t){this._config=t||{},this.render()}},{key:"hass",set:function(t){this._hass=t}},{key:"render",value:function(){var t,e,n=this;this.innerHTML="";var r=document.createElement("div");r.style.padding="16px";var i=document.createElement("label");i.style.display="block",i.style.marginBottom="8px",i.innerText="主机名称:";var o=document.createElement("input");o.type="text",o.value=(null===(t=this._config)||void 0===t?void 0:t.host_name)||"",o.style.width="100%",o.style.padding="8px",o.style.boxSizing="border-box",o.addEventListener("change",function(t){n._config.host_name=t.target.value,n.dispatchEvent(new CustomEvent("config-changed",{detail:{config:n._config}}))}),r.appendChild(i),r.appendChild(o);var a=document.createElement("div");a.style.marginTop="16px";var c=document.createElement("h4");c.innerText="Remote Entities",a.appendChild(c),Array.isArray(null===(e=this._config)||void 0===e?void 0:e.entities)||(this._config.entities=[]),this._config.entities.forEach(function(t,e){var r,i=document.createElement("div");i.style.marginBottom="8px",i.style.display="flex",i.style.gap="8px";var o=document.createElement("select");o.style.flex="1",o.innerHTML='<option value="">Select Remote Entity</option>',Object.keys((null===(r=n._hass)||void 0===r?void 0:r.states)||{}).filter(function(t){return t.startsWith("remote.")}).forEach(function(e){var n=document.createElement("option");n.value=e,n.text=e,e===t.entity_id&&(n.selected=!0),o.appendChild(n)}),o.addEventListener("change",function(t){n._config.entities[e].entity_id=t.target.value,n.dispatchEvent(new CustomEvent("config-changed",{detail:{config:n._config}}))});var c=n._createButton("Delete",function(){n._config.entities.splice(e,1),n.dispatchEvent(new CustomEvent("config-changed",{detail:{config:n._config}})),n.render()});i.appendChild(o),i.appendChild(c),a.appendChild(i)});var u=this._createButton("Add Host",function(){n._config.entities.push({entity_id:"",commands:[]}),n.dispatchEvent(new CustomEvent("config-changed",{detail:{config:n._config}})),n.render()});a.appendChild(u),r.appendChild(a),this.appendChild(r)}}],n&&Rn(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,n}();customElements.define("aiks-tv-card",O),customElements.define("aiks-tv-card-editor",x),customElements.define("aiks-light-card",I),customElements.define("aiks-light-card-editor",Y),customElements.define("aiks-fan-card",it),customElements.define("aiks-fan-card-editor",ft),customElements.define("aiks-scene-card",Et),customElements.define("aiks-scene-card-editor",kt),customElements.define("aiks-media-player-card",$t),customElements.define("aiks-media-player-card-editor",Jt),customElements.define("aiks-climate-card",ce),customElements.define("aiks-climate-card-editor",ye),customElements.define("aiks-cover-card",Pe),customElements.define("aiks-cover-card-editor",Be),customElements.define("aiks-switch-card",Ne),customElements.define("aiks-switch-card-editor",Xe),customElements.define("aiks-weather-card",fn),customElements.define("aiks-weather-card-editor",bn),customElements.define("aiks-host-card",kn),customElements.define("aiks-host-card-editor",zn),window.customCards=window.customCards||[],window.customCards.push({type:"aiks-tv-card",name:navigator.language.startsWith("zh")?"电视(ROS)":"TV(ROS)",description:navigator.language.startsWith("zh")?"电视卡片":"TV Card",preview:!0},{type:"aiks-light-card",name:navigator.language.startsWith("zh")?"灯光(ROS)":"Light(ROS)",description:navigator.language.startsWith("zh")?"灯光卡片":"Light Card",preview:!0},{type:"aiks-fan-card",name:navigator.language.startsWith("zh")?"风扇(ROS)":"Fan(ROS)",description:navigator.language.startsWith("zh")?"风扇卡片":"Fan Card",preview:!0},{type:"aiks-scene-card",name:navigator.language.startsWith("zh")?"场景(ROS)":"Scene(ROS)",description:navigator.language.startsWith("zh")?"场景卡片":"Scene Card",preview:!0},{type:"aiks-media-player-card",name:navigator.language.startsWith("zh")?"媒体播放器(ROS)":"Media Player(ROS)",description:navigator.language.startsWith("zh")?"媒体播放器卡片":"Media Player Card",preview:!0},{type:"aiks-climate-card",name:navigator.language.startsWith("zh")?"空调(ROS)":"AC(ROS)",description:navigator.language.startsWith("zh")?"空调卡片":"AC Card",preview:!0},{type:"aiks-cover-card",name:navigator.language.startsWith("zh")?"窗帘(ROS)":"Cover(ROS)",description:navigator.language.startsWith("zh")?"窗帘卡片":"Cover Card",preview:!0},{type:"aiks-switch-card",name:navigator.language.startsWith("zh")?"开关(ROS)":"Switch(ROS)",description:navigator.language.startsWith("zh")?"开关卡片":"Switch Card",preview:!0},{type:"aiks-weather-card",name:navigator.language.startsWith("zh")?"天气(ROS)":"Weather(ROS)",description:navigator.language.startsWith("zh")?"天气卡片":"Weather Card",preview:!0},{type:"aiks-host-card",name:navigator.language.startsWith("zh")?"主机(ROS)":"Host(ROS)",description:navigator.language.startsWith("zh")?"主机卡片":"Host Card",preview:!0}),console.log("✅ Aiks Custom Cards loaded successfully!")})();
//# sourceMappingURL=RosCard.js.map