/*! For license information please see RosCard.js.LICENSE.txt */
(()=>{"use strict";var t={373:(t,e,n)=>{function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}function o(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function i(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?o(Object(n),!0).forEach(function(e){a(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function a(t,e,n){return(e=u(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function c(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,u(r.key),r)}}function u(t){var e=function(t){if("object"!=r(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=r(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==r(e)?e:e+""}function l(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(l=function(){return!!t})()}function s(t){return s=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},s(t)}function f(t,e){return f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},f(t,e)}n.r(e),n.d(e,{AiksSwitchMonitorCardEditor:()=>p});var p=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=function(t,e,n){return e=s(e),function(t,e){if(e&&("object"==r(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,l()?Reflect.construct(e,n||[],s(t).constructor):e.apply(t,n))}(this,e)).deviceTypes={light:!0,switch:!0,climate:!0},t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&f(t,e)}(e,t),n=e,(o=[{key:"generateUUID",value:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)})}},{key:"setConfig",value:function(t){var e=i({},t);e.id||(e.id=this.generateUUID()),this._config={type:e.type||"custom:aiks-switch-monitor-card",id:e.id,monitor_name:e.monitor_name||("zh"===this._language?"统计卡片":"Unnamed Monitor"),device_types:e.device_types||{light:!0,switch:!0,climate:!0}},this.deviceTypes=i({},this._config.device_types),this.dispatchEvent(new CustomEvent("config-changed",{detail:{config:i({},this._config)}})),this.render()}},{key:"hass",set:function(t){this._hass=t,this.firstRender&&(this.render(),this.firstRender=!1)}},{key:"getCheckedCount",value:function(){return Object.values(this.deviceTypes).filter(function(t){return!0===t}).length}},{key:"onCheckboxChange",value:function(t){this.deviceTypes[t]&&1===this.getCheckedCount()||(this.deviceTypes[t]=!this.deviceTypes[t],this._config.device_types=i({},this.deviceTypes),this.dispatchEvent(new CustomEvent("config-changed",{detail:{config:i({},this._config)},bubbles:!0,composed:!0})),this.render())}},{key:"getDeviceTypeLabel",value:function(t){return{light:"zh"===this._language?"灯":"Light",switch:"zh"===this._language?"开关":"Switch",climate:"zh"===this._language?"空调":"Climate"}[t]||t}},{key:"render",value:function(){var t=this;if(this._config&&this._hass){this.innerHTML="";var e=document.createElement("div");e.style.padding="16px";var n=document.createElement("div");n.style.marginBottom="16px",n.style.display="flex",n.style.alignItems="center";var r=document.createElement("span");r.innerText="zh"===this._language?"卡片名称: ":"Card Name: ",r.style.width="100px",n.appendChild(r);var o=document.createElement("input");o.type="text",o.value=this._config.monitor_name,o.style.width="200px",o.style.padding="6px",o.addEventListener("blur",function(){t._config.monitor_name=o.value,t.dispatchEvent(new CustomEvent("config-changed",{detail:{config:i({},t._config)},bubbles:!0,composed:!0}))}),n.appendChild(o),e.appendChild(n);var a=document.createElement("div");a.innerText="zh"===this._language?"设备类型: ":"Device Types: ",a.style.marginBottom="8px",a.style.fontWeight="600",e.appendChild(a);var c=document.createElement("div");c.style.marginBottom="16px",c.style.paddingLeft="20px",["light","switch","climate"].forEach(function(e){var n=document.createElement("div");n.style.marginBottom="8px",n.style.display="flex",n.style.alignItems="center";var r=document.createElement("input");r.type="checkbox",r.checked=t.deviceTypes[e],r.style.marginRight="8px",r.style.cursor="pointer",r.id="device-type-".concat(e),t.deviceTypes[e]&&1===t.getCheckedCount()&&(r.disabled=!0,r.style.cursor="not-allowed",r.style.opacity="0.5"),r.addEventListener("change",function(){t.onCheckboxChange(e)});var o=document.createElement("label");o.htmlFor="device-type-".concat(e),o.innerText=t.getDeviceTypeLabel(e),o.style.cursor="pointer",o.style.marginBottom="0",n.appendChild(r),n.appendChild(o),c.appendChild(n)}),e.appendChild(c),this.appendChild(e)}}}])&&c(n.prototype,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,o}(n(568).l)},568:(t,e,n)=>{n.d(e,{l:()=>f});var r={zh:{cardTitle:function(t){return"".concat(t||"未命名设备"," 卡片")},controlPanelTitle:"发送控制命令",sendButton:"发送",testButton:"测试",nameLabel:"设备名称: ",selectEntity:"请选择实体",selectCommand:"请选择命令",selectOption:"请选择选项",enterCommand:"请输入命令值...",clearButton:"清空",validEntity:"请选择有效实体",stateOn:"开",stateOff:"关",defaultIconPath:"/local/community/RosCard/icon_img/states_device_light_on_icon.png",entity:"实体",executionModes:{immediate:"立即执行",delayed:"延迟执行",popup:"弹窗询问"},independentDisplay:"是否独立显示",yes:"是",no:"否"},en:{cardTitle:function(t){return"".concat(t||"Unnamed Device"," Card")},controlPanelTitle:"Send Control Commands",sendButton:"Send",testButton:"Test",nameLabel:"Device Name: ",selectEntity:"Please select an entity",selectCommand:"Please select a command",selectOption:"Please select an option",enterCommand:"Enter command value...",clearButton:"Clear",validEntity:"Please select a valid entity",stateOn:"On",stateOff:"Off",defaultIconPath:"/local/community/RosCard/icon_img/states_device_light_on_icon.png",entity:"Entity",executionModes:{immediate:"Immediate",delayed:"Delayed",popup:"Popup Ask"},independentDisplay:"Show independently",yes:"Yes",no:"No"}};function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,a(r.key),r)}}function a(t){var e=function(t){if("object"!=o(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==o(e)?e:e+""}function c(t){var e="function"==typeof Map?new Map:void 0;return c=function(t){if(null===t||!function(t){try{return-1!==Function.toString.call(t).indexOf("[native code]")}catch(e){return"function"==typeof t}}(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return function(t,e,n){if(u())return Reflect.construct.apply(null,arguments);var r=[null];r.push.apply(r,e);var o=new(t.bind.apply(t,r));return n&&l(o,n.prototype),o}(t,arguments,s(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),l(n,t)},c(t)}function u(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(u=function(){return!!t})()}function l(t,e){return l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},l(t,e)}function s(t){return s=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},s(t)}var f=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=function(t,e,n){return e=s(e),function(t,e){if(e&&("object"==o(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,u()?Reflect.construct(e,n||[],s(t).constructor):e.apply(t,n))}(this,e)).firstRender=!0,t._language=navigator.language.startsWith("zh")?"zh":"en",t._translations=r,t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&l(t,e)}(e,t),n=e,(a=[{key:"_createButton",value:function(t,e){var n=document.createElement("button");return n.innerText=t,n.style.margin="4px",n.style.padding="8px 12px",n.style.cursor="pointer",n.style.borderRadius="4px",n.onclick=e.bind(this),n}},{key:"_createIcon",value:function(t){var e=document.createElement("img");return e.src=t||this._translations[this._language].defaultIconPath,e.style.position="absolute",e.style.top="50px",e.style.right="30px",e.style.width="60px",e.style.height="60px",e}},{key:"_t",value:function(t){var e;return(null===(e=this._translations[this._language])||void 0===e?void 0:e[t])||""}}])&&i(n.prototype,a),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,a}(c(HTMLElement))}},e={};function n(r){var o=e[r];if(void 0!==o)return o.exports;var i=e[r]={exports:{}};return t[r](i,i.exports,n),i.exports}n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})};var r=n(568);function o(t){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o(t)}function i(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function c(n,r,o,i){var c=r&&r.prototype instanceof l?r:l,s=Object.create(c.prototype);return a(s,"_invoke",function(n,r,o){var i,a,c,l=0,s=o||[],f=!1,p={p:0,n:0,v:t,a:d,f:d.bind(t,4),d:function(e,n){return i=e,a=0,c=t,p.n=n,u}};function d(n,r){for(a=n,c=r,e=0;!f&&l&&!o&&e<s.length;e++){var o,i=s[e],d=p.p,y=i[2];n>3?(o=y===r)&&(c=i[(a=i[4])?5:(a=3,3)],i[4]=i[5]=t):i[0]<=d&&((o=n<2&&d<i[1])?(a=0,p.v=r,p.n=i[1]):d<y&&(o=n<3||i[0]>r||r>y)&&(i[4]=n,i[5]=r,p.n=y,a=0))}if(o||n>1)return u;throw f=!0,r}return function(o,s,y){if(l>1)throw TypeError("Generator is already running");for(f&&1===s&&d(s,y),a=s,c=y;(e=a<2?t:c)||!f;){i||(a?a<3?(a>1&&(p.n=-1),d(a,c)):p.n=c:p.v=c);try{if(l=2,i){if(a||(o="next"),e=i[o]){if(!(e=e.call(i,c)))throw TypeError("iterator result is not an object");if(!e.done)return e;c=e.value,a<2&&(a=0)}else 1===a&&(e=i.return)&&e.call(i),a<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),a=1);i=t}else if((e=(f=p.n<0)?c:n.call(r,p))!==u)break}catch(e){i=t,a=1,c=e}finally{l=1}}return{value:e,done:f}}}(n,o,i),!0),s}var u={};function l(){}function s(){}function f(){}e=Object.getPrototypeOf;var p=[][r]?e(e([][r]())):(a(e={},r,function(){return this}),e),d=f.prototype=l.prototype=Object.create(p);function y(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,a(t,o,"GeneratorFunction")),t.prototype=Object.create(d),t}return s.prototype=f,a(d,"constructor",f),a(f,"constructor",s),s.displayName="GeneratorFunction",a(f,o,"GeneratorFunction"),a(d),a(d,o,"Generator"),a(d,r,function(){return this}),a(d,"toString",function(){return"[object Generator]"}),(i=function(){return{w:c,m:y}})()}function a(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}a=function(t,e,n,r){function i(e,n){a(t,e,function(t){return this._invoke(e,n,t)})}e?o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:(i("next",0),i("throw",1),i("return",2))},a(t,e,n,r)}function c(t,e,n,r,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void n(t)}c.done?e(u):Promise.resolve(u).then(r,o)}function u(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,c=[],u=!0,l=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(c.push(r.value),c.length!==e);u=!0);}catch(t){l=!0,o=t}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return c}}(t,e)||s(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(t){return function(t){if(Array.isArray(t))return f(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||s(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(t,e){if(t){if("string"==typeof t)return f(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?f(t,e):void 0}}function f(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function p(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function d(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?p(Object(n),!0).forEach(function(e){y(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function y(t,e,n){return(e=v(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function h(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,v(r.key),r)}}function v(t){var e=function(t){if("object"!=o(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==o(e)?e:e+""}function b(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(b=function(){return!!t})()}function g(t){return g=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},g(t)}function m(t,e){return m=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},m(t,e)}var _=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=function(t,e,n){return e=g(e),function(t,e){if(e&&("object"==o(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,b()?Reflect.construct(e,n||[],g(t).constructor):e.apply(t,n))}(this,e))._translations=d(d({},t._translations),{},{zh:d(d({},t._translations.zh),{},{mediaCommands:[{label:"播放",value:"media_play"},{label:"暂停",value:"media_pause"},{label:"音量增加",value:"volume_up"},{label:"音量减少",value:"volume_down"},{label:"静音",value:"volume_mute_true"},{label:"取消静音",value:"volume_mute_false"}]}),en:d(d({},t._translations.en),{},{mediaCommands:[{label:"Play",value:"media_play"},{label:"Pause",value:"media_pause"},{label:"Volume Up",value:"volume_up"},{label:"Volume Down",value:"volume_down"},{label:"Mute",value:"volume_mute_true"},{label:"Unmute",value:"volume_mute_false"}]})}),t.addEventListener("config-changed",function(e){t.setConfig(e.detail.config)}),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&m(t,e)}(e,t),n=e,r=[{key:"setConfig",value:function(t){this._config=d(d({},t),{},{tv_name:t.tv_name||("zh"===this._language?"未命名电视":"Unnamed TV"),entities:Array.isArray(null==t?void 0:t.entities)?l(t.entities):[],icon_path:t.icon_path||"/local/community/RosCard/icon_img/icon_tv.png",tv_type:t.tv_type||"android_tv"}),this._hass&&this.render()}},{key:"hass",set:function(t){this._hass=t,this.firstRender&&(this._config&&this.render(),this.firstRender=!1)}},{key:"render",value:function(){var t=this;if(this._hass){this.innerHTML="";var e=document.createElement("ha-card");e.header=this._translations[this._language].cardTitle(this._config.tv_name),e.appendChild(this._createIcon(this._config.icon_path));var n=document.createElement("div");n.style.padding="16px",n.style.position="relative",n.innerHTML="<h3>".concat(this._translations[this._language].controlPanelTitle,"</h3>"),Array.isArray(this._config.entities)&&this._config.entities.length>0&&this._config.entities.forEach(function(e){"media_player"===e.type&&e.commands?Object.entries(e.commands).forEach(function(r){var o=u(r,2),i=o[0],a=o[1],c=document.createElement("div");c.innerHTML="<span>".concat(e.entity_id,": ").concat(i,"</span>");var l=t._createButton(t._translations[t._language].sendButton,function(){"volume_mute"===a?t._hass.callService(e.type,a,{entity_id:e.entity_id,is_volume_muted:!(!i.includes("静音")&&!i.includes("Mute"))}):t._hass.callService(e.type,a,{entity_id:e.entity_id})});c.appendChild(l),n.appendChild(c)}):"remote"===e.type&&e.commands?Object.entries(e.commands).forEach(function(r){var o=u(r,2),i=o[0],a=o[1],c=document.createElement("div");c.innerHTML="<span>".concat(e.entity_id,": ").concat(i," = ").concat(a,"</span>");var l=t._createButton(t._translations[t._language].testButton,function(){t._hass.callService(e.type,"send_command",{entity_id:e.entity_id,command:a})});c.appendChild(l),n.appendChild(c)}):"select"===e.type&&e.commands&&Object.entries(e.commands).forEach(function(r){var o=u(r,2),i=o[0],a=o[1],c=document.createElement("div");c.innerHTML="<span>".concat(e.entity_id,": ").concat(i," = ").concat(a,"</span>");var l=t._createButton(t._translations[t._language].testButton,function(){t._hass.callService(e.type,"select_option",{entity_id:e.entity_id,option:a})});c.appendChild(l),n.appendChild(c)})}),e.appendChild(n),this.appendChild(e)}}}],a=[{key:"getConfigElement",value:(s=i().m(function t(){return i().w(function(t){for(;;)if(0===t.n)return t.a(2,document.createElement("aiks-tv-card-editor"))},t)}),f=function(){var t=this,e=arguments;return new Promise(function(n,r){var o=s.apply(t,e);function i(t){c(o,n,r,i,a,"next",t)}function a(t){c(o,n,r,i,a,"throw",t)}i(void 0)})},function(){return f.apply(this,arguments)})},{key:"getStubConfig",value:function(){return{tv_name:"zh"==(navigator.language.startsWith("zh")?"zh":"en")?"未命名电视":"Unnamed TV",entities:[],tv_type:"android_tv",media_play_entity:""}}}],r&&h(n.prototype,r),a&&h(n,a),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,a,s,f}(r.l);function O(t){return O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},O(t)}function w(t){return function(t){if(Array.isArray(t))return j(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return j(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?j(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function j(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function E(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function P(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?E(Object(n),!0).forEach(function(e){k(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function S(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,A(r.key),r)}}function C(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(C=function(){return!!t})()}function x(t){return x=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},x(t)}function T(t,e){return T=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},T(t,e)}function k(t,e,n){return(e=A(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function A(t){var e=function(t){if("object"!=O(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=O(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==O(e)?e:e+""}var D=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=function(t,e,n){return e=x(e),function(t,e){if(e&&("object"==O(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,C()?Reflect.construct(e,n||[],x(t).constructor):e.apply(t,n))}(this,e))._translations=P(P({},t._translations),{},{zh:P(P({},t._translations.zh),{},{mediaCommands:[{label:"播放",value:"media_play"},{label:"暂停",value:"media_pause"},{label:"音量增加",value:"volume_up"},{label:"音量减少",value:"volume_down"},{label:"静音",value:"volume_mute_true"},{label:"取消静音",value:"volume_mute_false"}]}),en:P(P({},t._translations.en),{},{mediaCommands:[{label:"Play",value:"media_play"},{label:"Pause",value:"media_pause"},{label:"Volume Up",value:"volume_up"},{label:"Volume Down",value:"volume_down"},{label:"Mute",value:"volume_mute_true"},{label:"Unmute",value:"volume_mute_false"}]})}),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&T(t,e)}(e,t),n=e,r=[{key:"generateUUID",value:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)})}},{key:"setConfig",value:function(t){var e=P({},t);e.id||(e.id=this.generateUUID()),this._config={type:e.type||"custom:aiks-tv-card",id:e.id,tv_type:e.tv_type||"android_tv",tv_name:e.tv_name||("zh"===this._language?"未命名电视":"Unnamed TV"),media_play_entity:e.media_play_entity||"",entities:Array.isArray(e.entities)?w(e.entities):[]},this.dispatchEvent(new CustomEvent("config-changed",{detail:{config:P({},this._config)}})),this.render()}},{key:"hass",set:function(t){this._hass=t,this.firstRender&&(this.render(),this.firstRender=!1)}},{key:"render",value:function(){var t=this;if(this._config&&this._hass){this.innerHTML="";var e=document.createElement("div");e.style.padding="16px";var n=document.createElement("div");n.style.marginBottom="10px",n.style.display="flex",n.style.alignItems="center";var r=document.createElement("span");r.innerText="zh"===this._language?"设备类型: ":"Device Type: ",r.style.width="100px",n.appendChild(r);var o=document.createElement("select");if(o.style.width="120px",[{value:"apple_tv",label:(this._language,"Apple TV")},{value:"android_tv",label:"zh"===this._language?"安卓电视":"Android TV"}].forEach(function(e){var n=document.createElement("option");n.value=e.value,n.text=e.label,t._config.tv_type===e.value&&(n.selected=!0),o.appendChild(n)}),o.addEventListener("change",function(){t._config.tv_type=o.value,t.dispatchEvent(new CustomEvent("config-changed",{detail:{config:P({},t._config)}})),t.render()}),n.appendChild(o),e.appendChild(n),"apple_tv"===this._config.tv_type||"android_tv"===this._config.tv_type){var i=document.createElement("div");i.style.marginBottom="10px",i.style.display="flex",i.style.alignItems="center";var a=document.createElement("span");a.innerText="zh"===this._language?"播放实体: ":"Media Player: ",a.style.width="100px",i.appendChild(a);var c=document.createElement("select");c.style.width="200px",c.innerHTML='<option value="">'.concat(this._translations[this._language].selectEntity,"</option>"),Object.keys(this._hass.states).forEach(function(e){if(e.startsWith("media_player.")){var n,r=document.createElement("option");r.value=e,r.text=(null===(n=t._hass.states[e])||void 0===n||null===(n=n.attributes)||void 0===n?void 0:n.friendly_name)||e,e===t._config.media_play_entity&&(r.selected=!0),c.appendChild(r)}}),c.addEventListener("change",function(){t._config.media_play_entity=c.value,t.dispatchEvent(new CustomEvent("config-changed",{detail:{config:P({},t._config)}}))}),i.appendChild(c),e.appendChild(i)}var u=document.createElement("div");u.style.marginBottom="10px",u.style.display="flex",u.style.alignItems="center";var l=document.createElement("span");l.innerText=this._translations[this._language].nameLabel,l.style.width="100px",u.appendChild(l);var s=document.createElement("input");s.type="text",s.value=this._config.tv_name,s.style.width="200px",s.addEventListener("blur",function(){t._config.tv_name=s.value,t.dispatchEvent(new CustomEvent("config-changed",{detail:{config:P({},t._config)}}))}),u.appendChild(s),e.appendChild(u);var f=document.createElement("div");f.id="entityContainer";var p=["POWER","UP","DOWN","LEFT","RIGHT","CENTER","BACK","PLAY","PAUSE","VOLUME_UP","VOLUME_DOWN","MUTE","UN_MUTE","SETTINGS","HOME","MENU"],d="android_tv"===this._config.tv_type?[].concat(p,["NUM_0","NUM_1","NUM_2","NUM_3","NUM_4","NUM_5","NUM_6","NUM_7","NUM_8","NUM_9","DELETE"]):p,y={};(this._config.entities||[]).forEach(function(t){t&&t.key&&(y[t.key]=t)}),this._config.entities=d.map(function(t){var e=y[t];return e?P(P({},e),{},{key:t}):{key:t,type:"",entity_id:"",value:""}}),this._config.entities.forEach(function(e,n){f.appendChild(t._createEntityRow(n,e,t._hass))}),e.appendChild(f),this.appendChild(e)}}},{key:"_showToast",value:function(t){try{this.dispatchEvent(new CustomEvent("show-toast",{detail:{message:t}}))}catch(e){console.warn(t)}}},{key:"_sendTest",value:function(t,e){var n,r=this._hass;if(r){var o=(null==t?void 0:t.entity_id)||"",i=o?o.split(".")[0]:(null==t?void 0:t.type)||"",a=(null!==(n=null!=e?e:null==t?void 0:t.value)&&void 0!==n?n:"").toString().trim();if(o&&i)if(a||"media_player"===i)if("remote"!==i)if("media_player"!==i)"select"!==i?this._showToast("不支持的类型：".concat(i)):r.callService("select","select_option",{entity_id:o,option:a});else if("volume_mute_true"===a||"volume_mute_false"===a)r.callService("media_player","volume_mute",{entity_id:o,is_volume_muted:a.endsWith("_true")});else if(a.startsWith("volume_set_")){var c=parseFloat(a.split("_").pop());Number.isNaN(c)?this._showToast("音量格式应为 volume_set_0.0~1.0"):r.callService("media_player","volume_set",{entity_id:o,volume_level:Math.max(0,Math.min(1,c))})}else r.callService("media_player",a||"media_play",{entity_id:o});else r.callService("remote","send_command",{entity_id:o,command:a});else this._showToast("请先填写命令/选项");else this._showToast("请先选择实体")}else this._showToast("hass 未就绪")}},{key:"_createEntityRow",value:function(t,n,r){var o=this,i=document.createElement("div");i.style.marginBottom="10px",i.style.display="flex",i.style.alignItems="center";var a=document.createElement("span");a.innerText="".concat(n.key,": "),a.style.width="100px",i.appendChild(a);var c=document.createElement("select");c.style.width="200px",c.innerHTML='<option value="">'.concat(this._translations[this._language].selectEntity,"</option>"),Object.keys(r.states).forEach(function(t){if(t.startsWith("media_player.")||t.startsWith("remote.")||t.startsWith("select.")){var e,o=document.createElement("option");o.value=t,o.text=(null===(e=r.states[t])||void 0===e||null===(e=e.attributes)||void 0===e?void 0:e.friendly_name)||t,t===n.entity_id&&(o.selected=!0),c.appendChild(o)}}),i.appendChild(c);var u=document.createElement("div");u.style.marginLeft="10px",i.appendChild(u);var l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=o._config.entities.map(function(n,r){return r===t?P(P({},n),e):n});o._config=P(P({},o._config),{},{entities:n}),o.dispatchEvent(new CustomEvent("config-changed",{detail:{config:o._config},bubbles:!0,composed:!0}))},s=function(){var t;u.innerHTML="";var i=c.value,a=i?i.split(".")[0]:"",s=null;if("media_player"===a){var f=document.createElement("select");f.style.width="200px",f.innerHTML='<option value="">'.concat(o._translations[o._language].selectCommand,"</option>"),o._translations[o._language].mediaCommands.forEach(function(t){var e=document.createElement("option");e.value=t.value,e.text=t.label,t.value===n.value&&(e.selected=!0),f.appendChild(e)}),f.addEventListener("change",function(){return l({value:f.value})}),u.appendChild(f),s=f}else if("select"===a&&null!==(t=r.states[i])&&void 0!==t&&null!==(t=t.attributes)&&void 0!==t&&t.options){var p=document.createElement("select");p.style.width="200px",p.innerHTML='<option value="">'.concat(o._translations[o._language].selectOption,"</option>"),r.states[i].attributes.options.forEach(function(t){var e=document.createElement("option");e.value=t,e.text=t,t===n.value&&(e.selected=!0),p.appendChild(e)}),p.addEventListener("change",function(){return l({value:p.value})}),u.appendChild(p),s=p}else if("remote"===a){var d=document.createElement("input");if(d.type="text",n.value)d.value=n.value;else{var y,h=o._config.tv_type||"android_tv",v=(null===(y=e.REMOTE_DEFAULTS)||void 0===y||null===(y=y[h])||void 0===y?void 0:y[n.key])||"";d.value=v,l({value:v})}d.style.width="200px",d.placeholder=o._translations[o._language].enterCommand,d.addEventListener("blur",function(){return l({value:d.value})}),u.appendChild(d);var b=o._createButton("zh"===o._language?"恢复默认":"Reset Default",function(){var t,r=o._config.tv_type||"android_tv",i=(null===(t=e.REMOTE_DEFAULTS)||void 0===t||null===(t=t[r])||void 0===t?void 0:t[n.key])||"";d.value=i,l({value:i})});u.appendChild(b);var g=o._createButton(o._translations[o._language].testButton,function(){return o._sendTest({key:n.key,type:a,entity_id:c.value,value:d.value},d.value)});u.appendChild(g)}else u.innerHTML="<span>".concat(o._translations[o._language].validEntity,"</span>");if(s){var m=o._createButton(o._translations[o._language].testButton,function(){return o._sendTest({key:n.key,type:a,entity_id:c.value,value:s.value},s.value)});u.appendChild(m)}};return c.addEventListener("change",function(){var t=c.value||"",r=t?t.split(".")[0]:"",i={entity_id:t,type:r};if("remote"===r){var a,u=o._config.tv_type||"android_tv";i.value=(null===(a=e.REMOTE_DEFAULTS)||void 0===a||null===(a=a[u])||void 0===a?void 0:a[n.key])||""}l(i),s()}),n.entity_id&&(c.value=n.entity_id,s()),i}}],r&&S(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(r.l);function R(t){return R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},R(t)}function L(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var u=r&&r.prototype instanceof c?r:c,l=Object.create(u.prototype);return I(l,"_invoke",function(n,r,o){var i,c,u,l=0,s=o||[],f=!1,p={p:0,n:0,v:t,a:d,f:d.bind(t,4),d:function(e,n){return i=e,c=0,u=t,p.n=n,a}};function d(n,r){for(c=n,u=r,e=0;!f&&l&&!o&&e<s.length;e++){var o,i=s[e],d=p.p,y=i[2];n>3?(o=y===r)&&(u=i[(c=i[4])?5:(c=3,3)],i[4]=i[5]=t):i[0]<=d&&((o=n<2&&d<i[1])?(c=0,p.v=r,p.n=i[1]):d<y&&(o=n<3||i[0]>r||r>y)&&(i[4]=n,i[5]=r,p.n=y,c=0))}if(o||n>1)return a;throw f=!0,r}return function(o,s,y){if(l>1)throw TypeError("Generator is already running");for(f&&1===s&&d(s,y),c=s,u=y;(e=c<2?t:u)||!f;){i||(c?c<3?(c>1&&(p.n=-1),d(c,u)):p.n=u:p.v=u);try{if(l=2,i){if(c||(o="next"),e=i[o]){if(!(e=e.call(i,u)))throw TypeError("iterator result is not an object");if(!e.done)return e;u=e.value,c<2&&(c=0)}else 1===c&&(e=i.return)&&e.call(i),c<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),c=1);i=t}else if((e=(f=p.n<0)?u:n.call(r,p))!==a)break}catch(e){i=t,c=1,u=e}finally{l=1}}return{value:e,done:f}}}(n,o,i),!0),l}var a={};function c(){}function u(){}function l(){}e=Object.getPrototypeOf;var s=[][r]?e(e([][r]())):(I(e={},r,function(){return this}),e),f=l.prototype=c.prototype=Object.create(s);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,l):(t.__proto__=l,I(t,o,"GeneratorFunction")),t.prototype=Object.create(f),t}return u.prototype=l,I(f,"constructor",l),I(l,"constructor",u),u.displayName="GeneratorFunction",I(l,o,"GeneratorFunction"),I(f),I(f,o,"Generator"),I(f,r,function(){return this}),I(f,"toString",function(){return"[object Generator]"}),(L=function(){return{w:i,m:p}})()}function I(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}I=function(t,e,n,r){function i(e,n){I(t,e,function(t){return this._invoke(e,n,t)})}e?o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:(i("next",0),i("throw",1),i("return",2))},I(t,e,n,r)}function M(t,e,n,r,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void n(t)}c.done?e(u):Promise.resolve(u).then(r,o)}function B(t){return function(t){if(Array.isArray(t))return U(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return U(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?U(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function U(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function z(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function H(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?z(Object(n),!0).forEach(function(e){G(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):z(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function G(t,e,n){return(e=W(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function N(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,W(r.key),r)}}function W(t){var e=function(t){if("object"!=R(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=R(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==R(e)?e:e+""}function F(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(F=function(){return!!t})()}function $(t){return $=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},$(t)}function V(t,e){return V=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},V(t,e)}k(D,"REMOTE_DEFAULTS",{android_tv:{POWER:"POWER",UP:"UP",DOWN:"DOWN",LEFT:"LEFT",RIGHT:"RIGHT",CENTER:"CENTER",ENTER:"ENTER",BACK:"BACK",PLAY:"PLAY",PAUSE:"PAUSE",VOLUME_UP:"VOLUME_UP",VOLUME_DOWN:"VOLUME_DOWN",MUTE:"MUTE",UN_MUTE:"UNMUTE",SETTINGS:"SETTINGS",HOME:"HOME",MENU:"MENU"},apple_tv:{POWER:"suspend",UP:"up",DOWN:"down",LEFT:"left",RIGHT:"right",CENTER:"select",BACK:"menu",PLAY:"play",PAUSE:"pause",VOLUME_UP:"volume_up",VOLUME_DOWN:"volume_down",MUTE:"mute",UN_MUTE:"",SETTINGS:"wakeup",HOME:"home",MENU:"menu"}});var q=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e,n){return e=$(e),function(t,e){if(e&&("object"==R(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,F()?Reflect.construct(e,n||[],$(t).constructor):e.apply(t,n))}(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&V(t,e)}(e,t),n=e,r=[{key:"setConfig",value:function(t){this._config=H(H({},t),{},{entities:Array.isArray(null==t?void 0:t.entities)?B(t.entities):[],icon_path:t.icon_path||"/local/community/RosCard/icon_img/icon_light.png"}),this._hass&&this.render()}},{key:"hass",set:function(t){this._hass=t,this.firstRender&&(this._config&&this.render(),this.firstRender=!1)}},{key:"render",value:function(){var t=this;if(this._hass&&this._config){this.innerHTML="";var e=document.createElement("ha-card");e.header=this._translations[this._language].cardTitle("zh"===this._language?"灯光控制":"Light Control"),e.appendChild(this._createIcon(this._config.icon_path));var n=document.createElement("div");n.style.padding="16px",n.style.position="relative",this._config.entities.length>0?this._config.entities.forEach(function(e){var r,o=(null===(r=t._hass.states[e.entity_id])||void 0===r||null===(r=r.attributes)||void 0===r?void 0:r.friendly_name)||e.entity_id,i=document.createElement("div");i.style.marginBottom="10px",i.innerHTML="<div>".concat(t._translations[t._language].entity,": ").concat(o,"</div>"),n.appendChild(i)}):n.innerHTML="<div>".concat(this._translations[this._language].validEntity,"</div>"),e.appendChild(n),this.appendChild(e)}}}],o=[{key:"getConfigElement",value:(i=L().m(function t(){return L().w(function(t){for(;;)if(0===t.n)return t.a(2,document.createElement("aiks-light-card-editor"))},t)}),a=function(){var t=this,e=arguments;return new Promise(function(n,r){var o=i.apply(t,e);function a(t){M(o,n,r,a,c,"next",t)}function c(t){M(o,n,r,a,c,"throw",t)}a(void 0)})},function(){return a.apply(this,arguments)})},{key:"getStubConfig",value:function(){return{entities:[]}}}],r&&N(n.prototype,r),o&&N(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o,i,a}(r.l);function Y(t){return Y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Y(t)}function K(t){return function(t){if(Array.isArray(t))return Q(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||J(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function J(t,e){if(t){if("string"==typeof t)return Q(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Q(t,e):void 0}}function Q(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function X(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function Z(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?X(Object(n),!0).forEach(function(e){tt(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):X(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function tt(t,e,n){return(e=nt(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function et(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,nt(r.key),r)}}function nt(t){var e=function(t){if("object"!=Y(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=Y(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Y(e)?e:e+""}function rt(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(rt=function(){return!!t})()}function ot(t){return ot=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},ot(t)}function it(t,e){return it=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},it(t,e)}var at=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e,n){return e=ot(e),function(t,e){if(e&&("object"==Y(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,rt()?Reflect.construct(e,n||[],ot(t).constructor):e.apply(t,n))}(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&it(t,e)}(e,t),n=e,r=[{key:"setConfig",value:function(t){this._config=Z(Z({},t),{},{entities:Array.isArray(null==t?void 0:t.entities)?K(t.entities):[]}),this._config.entities=this._config.entities.map(function(t){return Z(Z({},t),{},{independent_display:!0===t.independent_display})}),this.render()}},{key:"hass",set:function(t){this._hass=t,this.firstRender&&(this.render(),this.firstRender=!1)}},{key:"render",value:function(){var t=this;if(this._config&&this._hass){this.innerHTML="";var e=document.createElement("div");e.style.padding="16px";var n=document.createElement("div");n.id="entityContainer",n.style.minHeight="100px",this._config.entities.forEach(function(e,r){var o=t._createEntityRow(r,e);n.appendChild(o)});var r=this._createButton("zh"===this._language?"添加设备":"Add Device",function(){t._config.entities.push({entity_id:""}),t.dispatchEvent(new CustomEvent("config-changed",{detail:{config:t._config},bubbles:!0,composed:!0})),t.render()});e.appendChild(n),e.appendChild(r),this.appendChild(e),this._setupDragAndDrop(n)}}},{key:"_createEntityRow",value:function(t,e){var n=this,r=document.createElement("div");r.style.marginBottom="10px",r.style.display="flex",r.style.alignItems="center",r.draggable=!0,r.dataset.index=t,r.style.cursor="move";var o=document.createElement("span");o.innerText=this._translations[this._language].selectEntity+": ",o.style.width="100px",r.appendChild(o);var i=document.createElement("select");i.style.width="250px",i.innerHTML='<option value="">'.concat(this._translations[this._language].selectEntity,"</option>"),Object.keys(this._hass.states).forEach(function(t){if(t.startsWith("light.")){var r,o=document.createElement("option");o.value=t;var a=(null===(r=n._hass.states[t])||void 0===r||null===(r=r.attributes)||void 0===r?void 0:r.friendly_name)||t;o.text="".concat(a," (").concat(t,")"),t===e.entity_id&&(o.selected=!0),i.appendChild(o)}}),i.addEventListener("change",function(){var e=K(n._config.entities);e[t]=Z(Z({},e[t]),{},{entity_id:i.value}),n._config=Z(Z({},n._config),{},{entities:e}),n.dispatchEvent(new CustomEvent("config-changed",{detail:{config:Z({},n._config)}})),n.render()}),r.appendChild(i);var a=document.createElement("label");a.style.marginLeft="10px",a.style.display="inline-flex",a.style.alignItems="center",a.style.gap="6px";var c=document.createElement("input");c.type="checkbox",c.checked=!!e.independent_display;var u=document.createElement("span");u.textContent=this._translations[this._language].independentDisplay,a.appendChild(c),a.appendChild(u),r.appendChild(a),c.addEventListener("change",function(){var e=K(n._config.entities);e[t]=Z(Z({},e[t]),{},{independent_display:c.checked}),n._config=Z(Z({},n._config),{},{entities:e}),n.dispatchEvent(new CustomEvent("config-changed",{detail:{config:Z({},n._config)}}))});var l=this._createButton("zh"===this._language?"删除":"Delete",function(){var e=K(n._config.entities);e.splice(t,1),n._config=Z(Z({},n._config),{},{entities:e}),n.dispatchEvent(new CustomEvent("config-changed",{detail:{config:Z({},n._config)}})),n.render()});return r.appendChild(l),r}},{key:"_setupDragAndDrop",value:function(t){var e=this,n=null;t.addEventListener("dragstart",function(t){var e=t.target;e.draggable&&(n=parseInt(e.dataset.index),t.dataTransfer.setData("text/plain",n),e.style.opacity="0.5")}),t.addEventListener("dragover",function(t){t.preventDefault()}),t.addEventListener("drop",function(r){if(r.preventDefault(),null!==n){var o=parseInt(r.target.dataset.index);if(!isNaN(o)&&n!==o){var i=K(e._config.entities),a=function(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,c=[],u=!0,l=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(c.push(r.value),c.length!==e);u=!0);}catch(t){l=!0,o=t}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return c}}(t,e)||J(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(i.splice(n,1),1)[0];i.splice(o,0,a),e._config=Z(Z({},e._config),{},{entities:i}),e.dispatchEvent(new CustomEvent("config-changed",{detail:{config:Z({},e._config)}})),e.render()}n=null,t.querySelectorAll("[draggable]").forEach(function(t){return t.style.opacity="1"})}}),t.addEventListener("dragend",function(e){null!==n&&t.querySelectorAll("[draggable]").forEach(function(t){return t.style.opacity="1"})})}}],r&&et(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(r.l);function ct(t){return ct="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ct(t)}function ut(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var u=r&&r.prototype instanceof c?r:c,l=Object.create(u.prototype);return lt(l,"_invoke",function(n,r,o){var i,c,u,l=0,s=o||[],f=!1,p={p:0,n:0,v:t,a:d,f:d.bind(t,4),d:function(e,n){return i=e,c=0,u=t,p.n=n,a}};function d(n,r){for(c=n,u=r,e=0;!f&&l&&!o&&e<s.length;e++){var o,i=s[e],d=p.p,y=i[2];n>3?(o=y===r)&&(u=i[(c=i[4])?5:(c=3,3)],i[4]=i[5]=t):i[0]<=d&&((o=n<2&&d<i[1])?(c=0,p.v=r,p.n=i[1]):d<y&&(o=n<3||i[0]>r||r>y)&&(i[4]=n,i[5]=r,p.n=y,c=0))}if(o||n>1)return a;throw f=!0,r}return function(o,s,y){if(l>1)throw TypeError("Generator is already running");for(f&&1===s&&d(s,y),c=s,u=y;(e=c<2?t:u)||!f;){i||(c?c<3?(c>1&&(p.n=-1),d(c,u)):p.n=u:p.v=u);try{if(l=2,i){if(c||(o="next"),e=i[o]){if(!(e=e.call(i,u)))throw TypeError("iterator result is not an object");if(!e.done)return e;u=e.value,c<2&&(c=0)}else 1===c&&(e=i.return)&&e.call(i),c<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),c=1);i=t}else if((e=(f=p.n<0)?u:n.call(r,p))!==a)break}catch(e){i=t,c=1,u=e}finally{l=1}}return{value:e,done:f}}}(n,o,i),!0),l}var a={};function c(){}function u(){}function l(){}e=Object.getPrototypeOf;var s=[][r]?e(e([][r]())):(lt(e={},r,function(){return this}),e),f=l.prototype=c.prototype=Object.create(s);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,l):(t.__proto__=l,lt(t,o,"GeneratorFunction")),t.prototype=Object.create(f),t}return u.prototype=l,lt(f,"constructor",l),lt(l,"constructor",u),u.displayName="GeneratorFunction",lt(l,o,"GeneratorFunction"),lt(f),lt(f,o,"Generator"),lt(f,r,function(){return this}),lt(f,"toString",function(){return"[object Generator]"}),(ut=function(){return{w:i,m:p}})()}function lt(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}lt=function(t,e,n,r){function i(e,n){lt(t,e,function(t){return this._invoke(e,n,t)})}e?o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:(i("next",0),i("throw",1),i("return",2))},lt(t,e,n,r)}function st(t,e,n,r,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void n(t)}c.done?e(u):Promise.resolve(u).then(r,o)}function ft(t){return function(t){if(Array.isArray(t))return pt(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return pt(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?pt(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function pt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function dt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function yt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?dt(Object(n),!0).forEach(function(e){ht(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):dt(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function ht(t,e,n){return(e=bt(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function vt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,bt(r.key),r)}}function bt(t){var e=function(t){if("object"!=ct(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=ct(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==ct(e)?e:e+""}function gt(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(gt=function(){return!!t})()}function mt(t){return mt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},mt(t)}function _t(t,e){return _t=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},_t(t,e)}var Ot=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e,n){return e=mt(e),function(t,e){if(e&&("object"==ct(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,gt()?Reflect.construct(e,n||[],mt(t).constructor):e.apply(t,n))}(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_t(t,e)}(e,t),n=e,r=[{key:"setConfig",value:function(t){this._config=yt(yt({},t),{},{entities:Array.isArray(null==t?void 0:t.entities)?ft(t.entities):[],icon_path:t.icon_path||"/local/community/RosCard/icon_img/icon_fan.png"}),this._hass&&this.render()}},{key:"hass",set:function(t){this._hass=t,this.firstRender&&(this._config&&this.render(),this.firstRender=!1)}},{key:"render",value:function(){var t=this;if(this._hass&&this._config){this.innerHTML="";var e=document.createElement("ha-card");e.header=this._translations[this._language].cardTitle("zh"===this._language?"风扇控制":"Fan Control"),e.appendChild(this._createIcon(this._config.icon_path));var n=document.createElement("div");n.style.padding="16px",n.style.position="relative",this._config.entities.length>0?this._config.entities.forEach(function(e){var r,o=(null===(r=t._hass.states[e.entity_id])||void 0===r||null===(r=r.attributes)||void 0===r?void 0:r.friendly_name)||e.entity_id,i=document.createElement("div");i.style.marginBottom="10px",i.innerHTML="<div>".concat(t._translations[t._language].entity,": ").concat(o,"</div>"),n.appendChild(i)}):n.innerHTML="<div>".concat(this._translations[this._language].validEntity,"</div>"),e.appendChild(n),this.appendChild(e)}}}],o=[{key:"getConfigElement",value:(i=ut().m(function t(){return ut().w(function(t){for(;;)if(0===t.n)return t.a(2,document.createElement("aiks-fan-card-editor"))},t)}),a=function(){var t=this,e=arguments;return new Promise(function(n,r){var o=i.apply(t,e);function a(t){st(o,n,r,a,c,"next",t)}function c(t){st(o,n,r,a,c,"throw",t)}a(void 0)})},function(){return a.apply(this,arguments)})},{key:"getStubConfig",value:function(){return{entities:[]}}}],r&&vt(n.prototype,r),o&&vt(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o,i,a}(r.l);function wt(t){return wt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},wt(t)}function jt(t){return function(t){if(Array.isArray(t))return Pt(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||Et(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Et(t,e){if(t){if("string"==typeof t)return Pt(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Pt(t,e):void 0}}function Pt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function St(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function Ct(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?St(Object(n),!0).forEach(function(e){xt(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):St(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function xt(t,e,n){return(e=kt(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Tt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,kt(r.key),r)}}function kt(t){var e=function(t){if("object"!=wt(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=wt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==wt(e)?e:e+""}function At(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(At=function(){return!!t})()}function Dt(t){return Dt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Dt(t)}function Rt(t,e){return Rt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Rt(t,e)}var Lt=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e,n){return e=Dt(e),function(t,e){if(e&&("object"==wt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,At()?Reflect.construct(e,n||[],Dt(t).constructor):e.apply(t,n))}(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Rt(t,e)}(e,t),n=e,r=[{key:"setConfig",value:function(t){this._config=Ct(Ct({},t),{},{entities:Array.isArray(null==t?void 0:t.entities)?jt(t.entities):[]}),this.render()}},{key:"hass",set:function(t){this._hass=t,this.firstRender&&(this.render(),this.firstRender=!1)}},{key:"render",value:function(){var t=this;if(this._config&&this._hass){this.innerHTML="";var e=document.createElement("div");e.style.padding="16px";var n=document.createElement("div");n.id="entityContainer",n.style.minHeight="100px",this._config.entities.forEach(function(e,r){var o=t._createEntityRow(r,e);n.appendChild(o)});var r=this._createButton("zh"===this._language?"添加设备":"Add Device",function(){t._config.entities.push({entity_id:""}),t.dispatchEvent(new CustomEvent("config-changed",{detail:{config:t._config},bubbles:!0,composed:!0})),t.render()});e.appendChild(n),e.appendChild(r),this.appendChild(e),this._setupDragAndDrop(n)}}},{key:"_createEntityRow",value:function(t,e){var n=this,r=document.createElement("div");r.style.marginBottom="10px",r.style.display="flex",r.style.alignItems="center",r.draggable=!0,r.dataset.index=t,r.style.cursor="move";var o=document.createElement("span");o.innerText=this._translations[this._language].selectEntity+": ",o.style.width="100px",r.appendChild(o);var i=document.createElement("select");i.style.width="250px",i.innerHTML='<option value="">'.concat(this._translations[this._language].selectEntity,"</option>"),Object.keys(this._hass.states).forEach(function(t){if(t.startsWith("fan.")){var r,o=document.createElement("option");o.value=t;var a=(null===(r=n._hass.states[t])||void 0===r||null===(r=r.attributes)||void 0===r?void 0:r.friendly_name)||t;o.text="".concat(a," (").concat(t,")"),t===e.entity_id&&(o.selected=!0),i.appendChild(o)}}),i.addEventListener("change",function(){var e=jt(n._config.entities);e[t]=Ct(Ct({},e[t]),{},{entity_id:i.value}),n._config=Ct(Ct({},n._config),{},{entities:e}),n.dispatchEvent(new CustomEvent("config-changed",{detail:{config:Ct({},n._config)}})),n.render()}),r.appendChild(i);var a=this._createButton("zh"===this._language?"删除":"Delete",function(){var e=jt(n._config.entities);e.splice(t,1),n._config=Ct(Ct({},n._config),{},{entities:e}),n.dispatchEvent(new CustomEvent("config-changed",{detail:{config:Ct({},n._config)}})),n.render()});return r.appendChild(a),r}},{key:"_setupDragAndDrop",value:function(t){var e=this,n=null;t.addEventListener("dragstart",function(t){var e=t.target;e.draggable&&(n=parseInt(e.dataset.index),t.dataTransfer.setData("text/plain",n),e.style.opacity="0.5")}),t.addEventListener("dragover",function(t){t.preventDefault()}),t.addEventListener("drop",function(r){if(r.preventDefault(),null!==n){var o=parseInt(r.target.dataset.index);if(!isNaN(o)&&n!==o){var i=jt(e._config.entities),a=function(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,c=[],u=!0,l=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(c.push(r.value),c.length!==e);u=!0);}catch(t){l=!0,o=t}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return c}}(t,e)||Et(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(i.splice(n,1),1)[0];i.splice(o,0,a),e._config=Ct(Ct({},e._config),{},{entities:i}),e.dispatchEvent(new CustomEvent("config-changed",{detail:{config:Ct({},e._config)}})),e.render()}n=null,t.querySelectorAll("[draggable]").forEach(function(t){return t.style.opacity="1"})}}),t.addEventListener("dragend",function(e){null!==n&&t.querySelectorAll("[draggable]").forEach(function(t){return t.style.opacity="1"})})}}],r&&Tt(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(r.l);function It(t){return It="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},It(t)}function Mt(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var u=r&&r.prototype instanceof c?r:c,l=Object.create(u.prototype);return Bt(l,"_invoke",function(n,r,o){var i,c,u,l=0,s=o||[],f=!1,p={p:0,n:0,v:t,a:d,f:d.bind(t,4),d:function(e,n){return i=e,c=0,u=t,p.n=n,a}};function d(n,r){for(c=n,u=r,e=0;!f&&l&&!o&&e<s.length;e++){var o,i=s[e],d=p.p,y=i[2];n>3?(o=y===r)&&(u=i[(c=i[4])?5:(c=3,3)],i[4]=i[5]=t):i[0]<=d&&((o=n<2&&d<i[1])?(c=0,p.v=r,p.n=i[1]):d<y&&(o=n<3||i[0]>r||r>y)&&(i[4]=n,i[5]=r,p.n=y,c=0))}if(o||n>1)return a;throw f=!0,r}return function(o,s,y){if(l>1)throw TypeError("Generator is already running");for(f&&1===s&&d(s,y),c=s,u=y;(e=c<2?t:u)||!f;){i||(c?c<3?(c>1&&(p.n=-1),d(c,u)):p.n=u:p.v=u);try{if(l=2,i){if(c||(o="next"),e=i[o]){if(!(e=e.call(i,u)))throw TypeError("iterator result is not an object");if(!e.done)return e;u=e.value,c<2&&(c=0)}else 1===c&&(e=i.return)&&e.call(i),c<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),c=1);i=t}else if((e=(f=p.n<0)?u:n.call(r,p))!==a)break}catch(e){i=t,c=1,u=e}finally{l=1}}return{value:e,done:f}}}(n,o,i),!0),l}var a={};function c(){}function u(){}function l(){}e=Object.getPrototypeOf;var s=[][r]?e(e([][r]())):(Bt(e={},r,function(){return this}),e),f=l.prototype=c.prototype=Object.create(s);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,l):(t.__proto__=l,Bt(t,o,"GeneratorFunction")),t.prototype=Object.create(f),t}return u.prototype=l,Bt(f,"constructor",l),Bt(l,"constructor",u),u.displayName="GeneratorFunction",Bt(l,o,"GeneratorFunction"),Bt(f),Bt(f,o,"Generator"),Bt(f,r,function(){return this}),Bt(f,"toString",function(){return"[object Generator]"}),(Mt=function(){return{w:i,m:p}})()}function Bt(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}Bt=function(t,e,n,r){function i(e,n){Bt(t,e,function(t){return this._invoke(e,n,t)})}e?o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:(i("next",0),i("throw",1),i("return",2))},Bt(t,e,n,r)}function Ut(t,e,n,r,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void n(t)}c.done?e(u):Promise.resolve(u).then(r,o)}function zt(t){return function(t){if(Array.isArray(t))return Ht(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return Ht(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ht(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ht(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function Gt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function Nt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Gt(Object(n),!0).forEach(function(e){Wt(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Gt(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function Wt(t,e,n){return(e=$t(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ft(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,$t(r.key),r)}}function $t(t){var e=function(t){if("object"!=It(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=It(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==It(e)?e:e+""}function Vt(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(Vt=function(){return!!t})()}function qt(t){return qt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},qt(t)}function Yt(t,e){return Yt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Yt(t,e)}var Kt=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e,n){return e=qt(e),function(t,e){if(e&&("object"==It(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Vt()?Reflect.construct(e,n||[],qt(t).constructor):e.apply(t,n))}(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Yt(t,e)}(e,t),n=e,r=[{key:"setConfig",value:function(t){this._config=Nt(Nt({},t),{},{entities:Array.isArray(null==t?void 0:t.entities)?zt(t.entities):[],icon_path:t.icon_path||"/local/community/RosCard/icon_img/icon_scene.png"}),this._hass&&this.render()}},{key:"hass",set:function(t){this._hass=t,this.firstRender&&(this._config&&this.render(),this.firstRender=!1)}},{key:"render",value:function(){var t=this;if(this._hass&&this._config){this.innerHTML="";var e=document.createElement("ha-card");e.header=this._translations[this._language].cardTitle("zh"===this._language?"场景控制":"Scene Control"),e.appendChild(this._createIcon(this._config.icon_path));var n=document.createElement("div");n.style.padding="16px",n.style.position="relative",this._config.entities.length>0?this._config.entities.forEach(function(e){var r,o=(null===(r=t._hass.states[e.entity_id])||void 0===r||null===(r=r.attributes)||void 0===r?void 0:r.friendly_name)||e.entity_id,i=document.createElement("div");i.style.marginBottom="10px",i.innerHTML="<div>".concat(t._translations[t._language].entity,": ").concat(o,"</div>"),n.appendChild(i)}):n.innerHTML="<div>".concat(this._translations[this._language].validEntity,"</div>"),e.appendChild(n),this.appendChild(e)}}}],o=[{key:"getConfigElement",value:(i=Mt().m(function t(){return Mt().w(function(t){for(;;)if(0===t.n)return t.a(2,document.createElement("aiks-scene-card-editor"))},t)}),a=function(){var t=this,e=arguments;return new Promise(function(n,r){var o=i.apply(t,e);function a(t){Ut(o,n,r,a,c,"next",t)}function c(t){Ut(o,n,r,a,c,"throw",t)}a(void 0)})},function(){return a.apply(this,arguments)})},{key:"getStubConfig",value:function(){return{entities:[]}}}],r&&Ft(n.prototype,r),o&&Ft(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o,i,a}(r.l);function Jt(t){return Jt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Jt(t)}function Qt(t){return function(t){if(Array.isArray(t))return Zt(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||Xt(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Xt(t,e){if(t){if("string"==typeof t)return Zt(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Zt(t,e):void 0}}function Zt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function te(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function ee(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?te(Object(n),!0).forEach(function(e){ne(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):te(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function ne(t,e,n){return(e=oe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function re(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,oe(r.key),r)}}function oe(t){var e=function(t){if("object"!=Jt(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=Jt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Jt(e)?e:e+""}function ie(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(ie=function(){return!!t})()}function ae(t){return ae=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},ae(t)}function ce(t,e){return ce=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},ce(t,e)}var ue=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e,n){return e=ae(e),function(t,e){if(e&&("object"==Jt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,ie()?Reflect.construct(e,n||[],ae(t).constructor):e.apply(t,n))}(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ce(t,e)}(e,t),n=e,r=[{key:"setConfig",value:function(t){this._config=ee(ee({},t),{},{entities:Array.isArray(null==t?void 0:t.entities)?Qt(t.entities):[]}),this.render()}},{key:"hass",set:function(t){this._hass=t,this.firstRender&&(this.render(),this.firstRender=!1)}},{key:"render",value:function(){var t=this;if(this._config&&this._hass){this.innerHTML="";var e=document.createElement("div");e.style.padding="16px";var n=document.createElement("div");n.id="entityContainer",n.style.minHeight="100px",this._config.entities.forEach(function(e,r){var o=t._createEntityRow(r,e);n.appendChild(o)});var r=this._createButton("zh"===this._language?"添加场景":"Add Scene",function(){t._config.entities.push({entity_id:""}),t.dispatchEvent(new CustomEvent("config-changed",{detail:{config:t._config},bubbles:!0,composed:!0})),t.render()});e.appendChild(n),e.appendChild(r),this.appendChild(e),this._setupDragAndDrop(n)}}},{key:"_createEntityRow",value:function(t,e){var n=this,r=document.createElement("div");r.style.marginBottom="10px",r.style.display="flex",r.style.alignItems="center",r.draggable=!0,r.dataset.index=t,r.style.cursor="move";var o=document.createElement("span");o.innerText=this._translations[this._language].selectEntity+": ",o.style.width="100px",r.appendChild(o);var i=document.createElement("select");i.style.width="250px",i.innerHTML='<option value="">'.concat(this._translations[this._language].selectEntity,"</option>"),Object.keys(this._hass.states).forEach(function(t){if(t.startsWith("scene.")){var r,o=document.createElement("option");o.value=t;var a=(null===(r=n._hass.states[t])||void 0===r||null===(r=r.attributes)||void 0===r?void 0:r.friendly_name)||t;o.text="".concat(a," (").concat(t,")"),t===e.entity_id&&(o.selected=!0),i.appendChild(o)}}),i.addEventListener("change",function(){var e=Qt(n._config.entities);e[t]=ee(ee({},e[t]),{},{entity_id:i.value}),n._config=ee(ee({},n._config),{},{entities:e}),n.dispatchEvent(new CustomEvent("config-changed",{detail:{config:ee({},n._config)}})),n.render()}),r.appendChild(i);var a=this._createButton("zh"===this._language?"删除":"Delete",function(){var e=Qt(n._config.entities);e.splice(t,1),n._config=ee(ee({},n._config),{},{entities:e}),n.dispatchEvent(new CustomEvent("config-changed",{detail:{config:ee({},n._config)}})),n.render()});return r.appendChild(a),r}},{key:"_setupDragAndDrop",value:function(t){var e=this,n=null;t.addEventListener("dragstart",function(t){var e=t.target;e.draggable&&(n=parseInt(e.dataset.index),t.dataTransfer.setData("text/plain",n),e.style.opacity="0.5")}),t.addEventListener("dragover",function(t){t.preventDefault()}),t.addEventListener("drop",function(r){if(r.preventDefault(),null!==n){var o=parseInt(r.target.dataset.index);if(!isNaN(o)&&n!==o){var i=Qt(e._config.entities),a=function(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,c=[],u=!0,l=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(c.push(r.value),c.length!==e);u=!0);}catch(t){l=!0,o=t}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return c}}(t,e)||Xt(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(i.splice(n,1),1)[0];i.splice(o,0,a),e._config=ee(ee({},e._config),{},{entities:i}),e.dispatchEvent(new CustomEvent("config-changed",{detail:{config:ee({},e._config)}})),e.render()}n=null,t.querySelectorAll("[draggable]").forEach(function(t){return t.style.opacity="1"})}}),t.addEventListener("dragend",function(e){null!==n&&t.querySelectorAll("[draggable]").forEach(function(t){return t.style.opacity="1"})})}}],r&&re(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(r.l);function le(t){return le="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},le(t)}function se(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var u=r&&r.prototype instanceof c?r:c,l=Object.create(u.prototype);return fe(l,"_invoke",function(n,r,o){var i,c,u,l=0,s=o||[],f=!1,p={p:0,n:0,v:t,a:d,f:d.bind(t,4),d:function(e,n){return i=e,c=0,u=t,p.n=n,a}};function d(n,r){for(c=n,u=r,e=0;!f&&l&&!o&&e<s.length;e++){var o,i=s[e],d=p.p,y=i[2];n>3?(o=y===r)&&(u=i[(c=i[4])?5:(c=3,3)],i[4]=i[5]=t):i[0]<=d&&((o=n<2&&d<i[1])?(c=0,p.v=r,p.n=i[1]):d<y&&(o=n<3||i[0]>r||r>y)&&(i[4]=n,i[5]=r,p.n=y,c=0))}if(o||n>1)return a;throw f=!0,r}return function(o,s,y){if(l>1)throw TypeError("Generator is already running");for(f&&1===s&&d(s,y),c=s,u=y;(e=c<2?t:u)||!f;){i||(c?c<3?(c>1&&(p.n=-1),d(c,u)):p.n=u:p.v=u);try{if(l=2,i){if(c||(o="next"),e=i[o]){if(!(e=e.call(i,u)))throw TypeError("iterator result is not an object");if(!e.done)return e;u=e.value,c<2&&(c=0)}else 1===c&&(e=i.return)&&e.call(i),c<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),c=1);i=t}else if((e=(f=p.n<0)?u:n.call(r,p))!==a)break}catch(e){i=t,c=1,u=e}finally{l=1}}return{value:e,done:f}}}(n,o,i),!0),l}var a={};function c(){}function u(){}function l(){}e=Object.getPrototypeOf;var s=[][r]?e(e([][r]())):(fe(e={},r,function(){return this}),e),f=l.prototype=c.prototype=Object.create(s);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,l):(t.__proto__=l,fe(t,o,"GeneratorFunction")),t.prototype=Object.create(f),t}return u.prototype=l,fe(f,"constructor",l),fe(l,"constructor",u),u.displayName="GeneratorFunction",fe(l,o,"GeneratorFunction"),fe(f),fe(f,o,"Generator"),fe(f,r,function(){return this}),fe(f,"toString",function(){return"[object Generator]"}),(se=function(){return{w:i,m:p}})()}function fe(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}fe=function(t,e,n,r){function i(e,n){fe(t,e,function(t){return this._invoke(e,n,t)})}e?o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:(i("next",0),i("throw",1),i("return",2))},fe(t,e,n,r)}function pe(t,e,n,r,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void n(t)}c.done?e(u):Promise.resolve(u).then(r,o)}function de(t){return function(t){if(Array.isArray(t))return ye(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return ye(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ye(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ye(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function he(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function ve(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?he(Object(n),!0).forEach(function(e){be(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):he(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function be(t,e,n){return(e=me(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ge(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,me(r.key),r)}}function me(t){var e=function(t){if("object"!=le(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=le(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==le(e)?e:e+""}function _e(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(_e=function(){return!!t})()}function Oe(t){return Oe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Oe(t)}function we(t,e){return we=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},we(t,e)}var je=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e,n){return e=Oe(e),function(t,e){if(e&&("object"==le(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,_e()?Reflect.construct(e,n||[],Oe(t).constructor):e.apply(t,n))}(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&we(t,e)}(e,t),n=e,r=[{key:"setConfig",value:function(t){this._config=ve(ve({},t),{},{entities:Array.isArray(null==t?void 0:t.entities)?de(t.entities):[],icon_path:t.icon_path||"/local/community/RosCard/icon_img/icon_media_play1.png"}),this._hass&&this.render()}},{key:"hass",set:function(t){this._hass=t,this.firstRender&&(this._config&&this.render(),this.firstRender=!1)}},{key:"render",value:function(){var t=this;if(this._hass&&this._config){this.innerHTML="";var e=document.createElement("ha-card");e.header=this._translations[this._language].cardTitle("zh"===this._language?"媒体播放器控制":"Media Player Control"),e.appendChild(this._createIcon(this._config.icon_path));var n=document.createElement("div");n.style.padding="16px",n.style.position="relative",this._config.entities.length>0?this._config.entities.forEach(function(e){var r,o=(null===(r=t._hass.states[e.entity_id])||void 0===r||null===(r=r.attributes)||void 0===r?void 0:r.friendly_name)||e.entity_id,i=document.createElement("div");i.style.marginBottom="10px",i.innerHTML="<div>".concat(t._translations[t._language].entity,": ").concat(o,"</div>"),n.appendChild(i)}):n.innerHTML="<div>".concat(this._translations[this._language].validEntity,"</div>"),e.appendChild(n),this.appendChild(e)}}}],o=[{key:"getConfigElement",value:(i=se().m(function t(){return se().w(function(t){for(;;)if(0===t.n)return t.a(2,document.createElement("aiks-media-player-card-editor"))},t)}),a=function(){var t=this,e=arguments;return new Promise(function(n,r){var o=i.apply(t,e);function a(t){pe(o,n,r,a,c,"next",t)}function c(t){pe(o,n,r,a,c,"throw",t)}a(void 0)})},function(){return a.apply(this,arguments)})},{key:"getStubConfig",value:function(){return{entities:[]}}}],r&&ge(n.prototype,r),o&&ge(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o,i,a}(r.l);function Ee(t){return Ee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ee(t)}function Pe(t){return function(t){if(Array.isArray(t))return Ce(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||Se(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Se(t,e){if(t){if("string"==typeof t)return Ce(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ce(t,e):void 0}}function Ce(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function xe(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function Te(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?xe(Object(n),!0).forEach(function(e){ke(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):xe(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function ke(t,e,n){return(e=De(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ae(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,De(r.key),r)}}function De(t){var e=function(t){if("object"!=Ee(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=Ee(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Ee(e)?e:e+""}function Re(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(Re=function(){return!!t})()}function Le(t){return Le=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Le(t)}function Ie(t,e){return Ie=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Ie(t,e)}var Me=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e,n){return e=Le(e),function(t,e){if(e&&("object"==Ee(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Re()?Reflect.construct(e,n||[],Le(t).constructor):e.apply(t,n))}(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ie(t,e)}(e,t),n=e,r=[{key:"setConfig",value:function(t){this._config=Te(Te({},t),{},{entities:Array.isArray(null==t?void 0:t.entities)?Pe(t.entities):[]}),this._config.entities=this._config.entities.map(function(t){return Te(Te({},t),{},{independent_display:!0===t.independent_display})}),this.render()}},{key:"hass",set:function(t){this._hass=t,this.firstRender&&(this.render(),this.firstRender=!1)}},{key:"render",value:function(){var t=this;if(this._config&&this._hass){this.innerHTML="";var e=document.createElement("div");e.style.padding="16px";var n=document.createElement("div");n.id="entityContainer",n.style.minHeight="100px",this._config.entities.forEach(function(e,r){var o=t._createEntityRow(r,e);n.appendChild(o)});var r=this._createButton("zh"===this._language?"添加媒体播放器":"Add Media Player",function(){t._config.entities.push({entity_id:""}),t.dispatchEvent(new CustomEvent("config-changed",{detail:{config:Te({},t._config)}})),t.render()});e.appendChild(n),e.appendChild(r),this.appendChild(e),this._setupDragAndDrop(n)}}},{key:"_createEntityRow",value:function(t,e){var n=this,r=document.createElement("div");r.style.marginBottom="10px",r.style.display="flex",r.style.alignItems="center",r.draggable=!0,r.dataset.index=t,r.style.cursor="move";var o=document.createElement("span");o.innerText=this._translations[this._language].selectEntity+": ",o.style.width="100px",r.appendChild(o);var i=document.createElement("select");i.style.width="250px",i.innerHTML='<option value="">'.concat(this._translations[this._language].selectEntity,"</option>"),Object.keys(this._hass.states).forEach(function(t){if(t.startsWith("media_player.")){var r,o=document.createElement("option");o.value=t;var a=(null===(r=n._hass.states[t])||void 0===r||null===(r=r.attributes)||void 0===r?void 0:r.friendly_name)||t;o.text="".concat(a," (").concat(t,")"),t===e.entity_id&&(o.selected=!0),i.appendChild(o)}}),i.addEventListener("change",function(){var e=Pe(n._config.entities);e[t]=Te(Te({},e[t]),{},{entity_id:i.value}),n._config=Te(Te({},n._config),{},{entities:e}),n.dispatchEvent(new CustomEvent("config-changed",{detail:{config:Te({},n._config)}})),n.render()}),r.appendChild(i);var a=document.createElement("label");a.style.marginLeft="10px",a.style.display="inline-flex",a.style.alignItems="center",a.style.gap="6px";var c=document.createElement("input");c.type="checkbox",c.checked=!!e.independent_display;var u=document.createElement("span");u.textContent=this._translations[this._language].independentDisplay,a.appendChild(c),a.appendChild(u),r.appendChild(a),c.addEventListener("change",function(){var e=Pe(n._config.entities);e[t]=Te(Te({},e[t]),{},{independent_display:c.checked}),n._config=Te(Te({},n._config),{},{entities:e}),n.dispatchEvent(new CustomEvent("config-changed",{detail:{config:Te({},n._config)}}))});var l=this._createButton("zh"===this._language?"删除":"Delete",function(){var e=Pe(n._config.entities);e.splice(t,1),n._config=Te(Te({},n._config),{},{entities:e}),n.dispatchEvent(new CustomEvent("config-changed",{detail:{config:Te({},n._config)}})),n.render()});return r.appendChild(l),r}},{key:"_setupDragAndDrop",value:function(t){var e=this,n=null;t.addEventListener("dragstart",function(t){var e=t.target;e.draggable&&(n=parseInt(e.dataset.index),t.dataTransfer.setData("text/plain",n),e.style.opacity="0.5")}),t.addEventListener("dragover",function(t){t.preventDefault()}),t.addEventListener("drop",function(r){if(r.preventDefault(),null!==n){var o=parseInt(r.target.dataset.index);if(!isNaN(o)&&n!==o){var i=Pe(e._config.entities),a=function(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,c=[],u=!0,l=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(c.push(r.value),c.length!==e);u=!0);}catch(t){l=!0,o=t}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return c}}(t,e)||Se(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(i.splice(n,1),1)[0];i.splice(o,0,a),e._config=Te(Te({},e._config),{},{entities:i}),e.dispatchEvent(new CustomEvent("config-changed",{detail:{config:Te({},e._config)}})),e.render()}n=null,t.querySelectorAll("[draggable]").forEach(function(t){return t.style.opacity="1"})}}),t.addEventListener("dragend",function(e){null!==n&&t.querySelectorAll("[draggable]").forEach(function(t){return t.style.opacity="1"})})}}],r&&Ae(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(r.l);function Be(t){return Be="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Be(t)}function Ue(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var u=r&&r.prototype instanceof c?r:c,l=Object.create(u.prototype);return ze(l,"_invoke",function(n,r,o){var i,c,u,l=0,s=o||[],f=!1,p={p:0,n:0,v:t,a:d,f:d.bind(t,4),d:function(e,n){return i=e,c=0,u=t,p.n=n,a}};function d(n,r){for(c=n,u=r,e=0;!f&&l&&!o&&e<s.length;e++){var o,i=s[e],d=p.p,y=i[2];n>3?(o=y===r)&&(u=i[(c=i[4])?5:(c=3,3)],i[4]=i[5]=t):i[0]<=d&&((o=n<2&&d<i[1])?(c=0,p.v=r,p.n=i[1]):d<y&&(o=n<3||i[0]>r||r>y)&&(i[4]=n,i[5]=r,p.n=y,c=0))}if(o||n>1)return a;throw f=!0,r}return function(o,s,y){if(l>1)throw TypeError("Generator is already running");for(f&&1===s&&d(s,y),c=s,u=y;(e=c<2?t:u)||!f;){i||(c?c<3?(c>1&&(p.n=-1),d(c,u)):p.n=u:p.v=u);try{if(l=2,i){if(c||(o="next"),e=i[o]){if(!(e=e.call(i,u)))throw TypeError("iterator result is not an object");if(!e.done)return e;u=e.value,c<2&&(c=0)}else 1===c&&(e=i.return)&&e.call(i),c<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),c=1);i=t}else if((e=(f=p.n<0)?u:n.call(r,p))!==a)break}catch(e){i=t,c=1,u=e}finally{l=1}}return{value:e,done:f}}}(n,o,i),!0),l}var a={};function c(){}function u(){}function l(){}e=Object.getPrototypeOf;var s=[][r]?e(e([][r]())):(ze(e={},r,function(){return this}),e),f=l.prototype=c.prototype=Object.create(s);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,l):(t.__proto__=l,ze(t,o,"GeneratorFunction")),t.prototype=Object.create(f),t}return u.prototype=l,ze(f,"constructor",l),ze(l,"constructor",u),u.displayName="GeneratorFunction",ze(l,o,"GeneratorFunction"),ze(f),ze(f,o,"Generator"),ze(f,r,function(){return this}),ze(f,"toString",function(){return"[object Generator]"}),(Ue=function(){return{w:i,m:p}})()}function ze(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}ze=function(t,e,n,r){function i(e,n){ze(t,e,function(t){return this._invoke(e,n,t)})}e?o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:(i("next",0),i("throw",1),i("return",2))},ze(t,e,n,r)}function He(t,e,n,r,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void n(t)}c.done?e(u):Promise.resolve(u).then(r,o)}function Ge(t){return function(t){if(Array.isArray(t))return Ne(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return Ne(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ne(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ne(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function We(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function Fe(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?We(Object(n),!0).forEach(function(e){$e(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):We(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function $e(t,e,n){return(e=qe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ve(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,qe(r.key),r)}}function qe(t){var e=function(t){if("object"!=Be(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=Be(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Be(e)?e:e+""}function Ye(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(Ye=function(){return!!t})()}function Ke(t){return Ke=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Ke(t)}function Je(t,e){return Je=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Je(t,e)}var Qe=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e,n){return e=Ke(e),function(t,e){if(e&&("object"==Be(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Ye()?Reflect.construct(e,n||[],Ke(t).constructor):e.apply(t,n))}(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Je(t,e)}(e,t),n=e,r=[{key:"setConfig",value:function(t){this._config=Fe(Fe({},t),{},{entities:Array.isArray(null==t?void 0:t.entities)?Ge(t.entities):[],icon_path:t.icon_path||"/local/community/RosCard/icon_img/icon_climate.png"}),this._hass&&this.render()}},{key:"hass",set:function(t){this._hass=t,this.firstRender&&(this._config&&this.render(),this.firstRender=!1)}},{key:"render",value:function(){var t=this;if(this._hass&&this._config){this.innerHTML="";var e=document.createElement("ha-card");e.header=this._translations[this._language].cardTitle("zh"===this._language?"气候控制":"Climate Control"),e.appendChild(this._createIcon(this._config.icon_path));var n=document.createElement("div");n.style.padding="16px",n.style.position="relative",this._config.entities.length>0?this._config.entities.forEach(function(e){var r,o=(null===(r=t._hass.states[e.entity_id])||void 0===r||null===(r=r.attributes)||void 0===r?void 0:r.friendly_name)||e.entity_id,i=document.createElement("div");i.style.marginBottom="10px",i.innerHTML="<div>".concat(t._translations[t._language].entity,": ").concat(o,"</div>"),n.appendChild(i)}):n.innerHTML="<div>".concat(this._translations[this._language].validEntity,"</div>"),e.appendChild(n),this.appendChild(e)}}}],o=[{key:"getConfigElement",value:(i=Ue().m(function t(){return Ue().w(function(t){for(;;)if(0===t.n)return t.a(2,document.createElement("aiks-climate-card-editor"))},t)}),a=function(){var t=this,e=arguments;return new Promise(function(n,r){var o=i.apply(t,e);function a(t){He(o,n,r,a,c,"next",t)}function c(t){He(o,n,r,a,c,"throw",t)}a(void 0)})},function(){return a.apply(this,arguments)})},{key:"getStubConfig",value:function(){return{entities:[]}}}],r&&Ve(n.prototype,r),o&&Ve(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o,i,a}(r.l);function Xe(t){return Xe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xe(t)}function Ze(t){return function(t){if(Array.isArray(t))return en(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||tn(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function tn(t,e){if(t){if("string"==typeof t)return en(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?en(t,e):void 0}}function en(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function nn(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function rn(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?nn(Object(n),!0).forEach(function(e){on(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):nn(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function on(t,e,n){return(e=cn(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function an(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,cn(r.key),r)}}function cn(t){var e=function(t){if("object"!=Xe(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=Xe(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Xe(e)?e:e+""}function un(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(un=function(){return!!t})()}function ln(t){return ln=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},ln(t)}function sn(t,e){return sn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},sn(t,e)}var fn=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e,n){return e=ln(e),function(t,e){if(e&&("object"==Xe(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,un()?Reflect.construct(e,n||[],ln(t).constructor):e.apply(t,n))}(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&sn(t,e)}(e,t),n=e,r=[{key:"setConfig",value:function(t){this._config=rn(rn({},t),{},{entities:Array.isArray(null==t?void 0:t.entities)?Ze(t.entities):[]}),this._config.entities=this._config.entities.map(function(t){return rn(rn({},t),{},{independent_display:!0===t.independent_display})}),this.render()}},{key:"hass",set:function(t){this._hass=t,this.firstRender&&(this.render(),this.firstRender=!1)}},{key:"render",value:function(){var t=this;if(this._config&&this._hass){this.innerHTML="";var e=document.createElement("div");e.style.padding="16px";var n=document.createElement("div");n.id="entityContainer",n.style.minHeight="100px",this._config.entities.forEach(function(e,r){var o=t._createEntityRow(r,e);n.appendChild(o)});var r=this._createButton("zh"===this._language?"添加气候设备":"Add Climate Device",function(){t._config.entities.push({entity_id:""}),t.dispatchEvent(new CustomEvent("config-changed",{detail:{config:rn({},t._config)}})),t.render()});e.appendChild(n),e.appendChild(r),this.appendChild(e),this._setupDragAndDrop(n)}}},{key:"_createEntityRow",value:function(t,e){var n=this,r=document.createElement("div");r.style.marginBottom="10px",r.style.display="flex",r.style.alignItems="center",r.draggable=!0,r.dataset.index=t,r.style.cursor="move";var o=document.createElement("span");o.innerText=this._translations[this._language].selectEntity+": ",o.style.width="100px",r.appendChild(o);var i=document.createElement("select");i.style.width="250px",i.innerHTML='<option value="">'.concat(this._translations[this._language].selectEntity,"</option>"),Object.keys(this._hass.states).forEach(function(t){if(t.startsWith("climate.")){var r,o=document.createElement("option");o.value=t;var a=(null===(r=n._hass.states[t])||void 0===r||null===(r=r.attributes)||void 0===r?void 0:r.friendly_name)||t;o.text="".concat(a," (").concat(t,")"),t===e.entity_id&&(o.selected=!0),i.appendChild(o)}}),i.addEventListener("change",function(){var e=Ze(n._config.entities);e[t]=rn(rn({},e[t]),{},{entity_id:i.value}),n._config=rn(rn({},n._config),{},{entities:e}),n.dispatchEvent(new CustomEvent("config-changed",{detail:{config:rn({},n._config)}})),n.render()}),r.appendChild(i);var a=document.createElement("label");a.style.marginLeft="10px",a.style.display="inline-flex",a.style.alignItems="center",a.style.gap="6px";var c=document.createElement("input");c.type="checkbox",c.checked=!!e.independent_display;var u=document.createElement("span");u.textContent=this._translations[this._language].independentDisplay,a.appendChild(c),a.appendChild(u),r.appendChild(a),c.addEventListener("change",function(){var e=Ze(n._config.entities);e[t]=rn(rn({},e[t]),{},{independent_display:c.checked}),n._config=rn(rn({},n._config),{},{entities:e}),n.dispatchEvent(new CustomEvent("config-changed",{detail:{config:rn({},n._config)}}))});var l=this._createButton("zh"===this._language?"删除":"Delete",function(){var e=Ze(n._config.entities);e.splice(t,1),n._config=rn(rn({},n._config),{},{entities:e}),n.dispatchEvent(new CustomEvent("config-changed",{detail:{config:rn({},n._config)}})),n.render()});return r.appendChild(l),r}},{key:"_setupDragAndDrop",value:function(t){var e=this,n=null;t.addEventListener("dragstart",function(t){var e=t.target;e.draggable&&(n=parseInt(e.dataset.index),t.dataTransfer.setData("text/plain",n),e.style.opacity="0.5")}),t.addEventListener("dragover",function(t){t.preventDefault()}),t.addEventListener("drop",function(r){if(r.preventDefault(),null!==n){var o=parseInt(r.target.dataset.index);if(!isNaN(o)&&n!==o){var i=Ze(e._config.entities),a=function(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,c=[],u=!0,l=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(c.push(r.value),c.length!==e);u=!0);}catch(t){l=!0,o=t}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return c}}(t,e)||tn(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(i.splice(n,1),1)[0];i.splice(o,0,a),e._config=rn(rn({},e._config),{},{entities:i}),e.dispatchEvent(new CustomEvent("config-changed",{detail:{config:rn({},e._config)}})),e.render()}n=null,t.querySelectorAll("[draggable]").forEach(function(t){return t.style.opacity="1"})}}),t.addEventListener("dragend",function(e){null!==n&&t.querySelectorAll("[draggable]").forEach(function(t){return t.style.opacity="1"})})}}],r&&an(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(r.l);function pn(t){return pn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},pn(t)}function dn(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var u=r&&r.prototype instanceof c?r:c,l=Object.create(u.prototype);return yn(l,"_invoke",function(n,r,o){var i,c,u,l=0,s=o||[],f=!1,p={p:0,n:0,v:t,a:d,f:d.bind(t,4),d:function(e,n){return i=e,c=0,u=t,p.n=n,a}};function d(n,r){for(c=n,u=r,e=0;!f&&l&&!o&&e<s.length;e++){var o,i=s[e],d=p.p,y=i[2];n>3?(o=y===r)&&(u=i[(c=i[4])?5:(c=3,3)],i[4]=i[5]=t):i[0]<=d&&((o=n<2&&d<i[1])?(c=0,p.v=r,p.n=i[1]):d<y&&(o=n<3||i[0]>r||r>y)&&(i[4]=n,i[5]=r,p.n=y,c=0))}if(o||n>1)return a;throw f=!0,r}return function(o,s,y){if(l>1)throw TypeError("Generator is already running");for(f&&1===s&&d(s,y),c=s,u=y;(e=c<2?t:u)||!f;){i||(c?c<3?(c>1&&(p.n=-1),d(c,u)):p.n=u:p.v=u);try{if(l=2,i){if(c||(o="next"),e=i[o]){if(!(e=e.call(i,u)))throw TypeError("iterator result is not an object");if(!e.done)return e;u=e.value,c<2&&(c=0)}else 1===c&&(e=i.return)&&e.call(i),c<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),c=1);i=t}else if((e=(f=p.n<0)?u:n.call(r,p))!==a)break}catch(e){i=t,c=1,u=e}finally{l=1}}return{value:e,done:f}}}(n,o,i),!0),l}var a={};function c(){}function u(){}function l(){}e=Object.getPrototypeOf;var s=[][r]?e(e([][r]())):(yn(e={},r,function(){return this}),e),f=l.prototype=c.prototype=Object.create(s);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,l):(t.__proto__=l,yn(t,o,"GeneratorFunction")),t.prototype=Object.create(f),t}return u.prototype=l,yn(f,"constructor",l),yn(l,"constructor",u),u.displayName="GeneratorFunction",yn(l,o,"GeneratorFunction"),yn(f),yn(f,o,"Generator"),yn(f,r,function(){return this}),yn(f,"toString",function(){return"[object Generator]"}),(dn=function(){return{w:i,m:p}})()}function yn(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}yn=function(t,e,n,r){function i(e,n){yn(t,e,function(t){return this._invoke(e,n,t)})}e?o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:(i("next",0),i("throw",1),i("return",2))},yn(t,e,n,r)}function hn(t,e,n,r,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void n(t)}c.done?e(u):Promise.resolve(u).then(r,o)}function vn(t){return function(t){if(Array.isArray(t))return bn(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return bn(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?bn(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function bn(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function gn(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function mn(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?gn(Object(n),!0).forEach(function(e){_n(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):gn(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function _n(t,e,n){return(e=wn(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function On(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,wn(r.key),r)}}function wn(t){var e=function(t){if("object"!=pn(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=pn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==pn(e)?e:e+""}function jn(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(jn=function(){return!!t})()}function En(t){return En=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},En(t)}function Pn(t,e){return Pn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Pn(t,e)}var Sn=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e,n){return e=En(e),function(t,e){if(e&&("object"==pn(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,jn()?Reflect.construct(e,n||[],En(t).constructor):e.apply(t,n))}(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Pn(t,e)}(e,t),n=e,r=[{key:"setConfig",value:function(t){this._config=mn(mn({},t),{},{entities:Array.isArray(null==t?void 0:t.entities)?vn(t.entities):[],icon_path:t.icon_path||"/local/community/RosCard/icon_img/icon_cover.png"}),this._hass&&this.render()}},{key:"hass",set:function(t){this._hass=t,this.firstRender&&(this._config&&this.render(),this.firstRender=!1)}},{key:"render",value:function(){var t=this;if(this._hass&&this._config){this.innerHTML="";var e=document.createElement("ha-card");e.header=this._translations[this._language].cardTitle("zh"===this._language?"窗帘控制":"Cover Control"),e.appendChild(this._createIcon(this._config.icon_path));var n=document.createElement("div");n.style.padding="16px",n.style.position="relative",this._config.entities.length>0?this._config.entities.forEach(function(e){var r,o=(null===(r=t._hass.states[e.entity_id])||void 0===r||null===(r=r.attributes)||void 0===r?void 0:r.friendly_name)||e.entity_id,i=document.createElement("div");i.style.marginBottom="10px",i.innerHTML="<div>".concat(t._translations[t._language].entity,": ").concat(o,"</div>"),n.appendChild(i)}):n.innerHTML="<div>".concat(this._translations[this._language].validEntity,"</div>"),e.appendChild(n),this.appendChild(e)}}}],o=[{key:"getConfigElement",value:(i=dn().m(function t(){return dn().w(function(t){for(;;)if(0===t.n)return t.a(2,document.createElement("aiks-cover-card-editor"))},t)}),a=function(){var t=this,e=arguments;return new Promise(function(n,r){var o=i.apply(t,e);function a(t){hn(o,n,r,a,c,"next",t)}function c(t){hn(o,n,r,a,c,"throw",t)}a(void 0)})},function(){return a.apply(this,arguments)})},{key:"getStubConfig",value:function(){return{entities:[]}}}],r&&On(n.prototype,r),o&&On(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o,i,a}(r.l);function Cn(t){return Cn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Cn(t)}function xn(t){return function(t){if(Array.isArray(t))return kn(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||Tn(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Tn(t,e){if(t){if("string"==typeof t)return kn(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?kn(t,e):void 0}}function kn(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function An(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function Dn(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?An(Object(n),!0).forEach(function(e){Rn(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):An(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function Rn(t,e,n){return(e=In(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ln(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,In(r.key),r)}}function In(t){var e=function(t){if("object"!=Cn(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=Cn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Cn(e)?e:e+""}function Mn(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(Mn=function(){return!!t})()}function Bn(t){return Bn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Bn(t)}function Un(t,e){return Un=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Un(t,e)}var zn=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e,n){return e=Bn(e),function(t,e){if(e&&("object"==Cn(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Mn()?Reflect.construct(e,n||[],Bn(t).constructor):e.apply(t,n))}(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Un(t,e)}(e,t),n=e,r=[{key:"setConfig",value:function(t){this._config=Dn(Dn({},t),{},{entities:Array.isArray(null==t?void 0:t.entities)?xn(t.entities):[]}),this.render()}},{key:"hass",set:function(t){this._hass=t,this.firstRender&&(this.render(),this.firstRender=!1)}},{key:"render",value:function(){var t=this;if(this._config&&this._hass){this.innerHTML="";var e=document.createElement("div");e.style.padding="16px";var n=document.createElement("div");n.id="entityContainer",n.style.minHeight="100px",this._config.entities.forEach(function(e,r){var o=t._createEntityRow(r,e);n.appendChild(o)});var r=this._createButton("zh"===this._language?"添加窗帘":"Add Cover",function(){t._config.entities.push({entity_id:""}),t.dispatchEvent(new CustomEvent("config-changed",{detail:{config:t._config},bubbles:!0,composed:!0})),t.render()});e.appendChild(n),e.appendChild(r),this.appendChild(e),this._setupDragAndDrop(n)}}},{key:"_createEntityRow",value:function(t,e){var n=this,r=document.createElement("div");r.style.marginBottom="10px",r.style.display="flex",r.style.alignItems="center",r.draggable=!0,r.dataset.index=t,r.style.cursor="move";var o=document.createElement("span");o.innerText=this._translations[this._language].selectEntity+": ",o.style.width="100px",r.appendChild(o);var i=document.createElement("select");i.style.width="250px",i.innerHTML='<option value="">'.concat(this._translations[this._language].selectEntity,"</option>"),Object.keys(this._hass.states).forEach(function(t){if(t.startsWith("cover.")){var r,o=document.createElement("option");o.value=t;var a=(null===(r=n._hass.states[t])||void 0===r||null===(r=r.attributes)||void 0===r?void 0:r.friendly_name)||t;o.text="".concat(a," (").concat(t,")"),t===e.entity_id&&(o.selected=!0),i.appendChild(o)}}),i.addEventListener("change",function(){var e=xn(n._config.entities);e[t]=Dn(Dn({},e[t]),{},{entity_id:i.value}),n._config=Dn(Dn({},n._config),{},{entities:e}),n.dispatchEvent(new CustomEvent("config-changed",{detail:{config:Dn({},n._config)}})),n.render()}),r.appendChild(i);var a=this._createButton("zh"===this._language?"删除":"Delete",function(){var e=xn(n._config.entities);e.splice(t,1),n._config=Dn(Dn({},n._config),{},{entities:e}),n.dispatchEvent(new CustomEvent("config-changed",{detail:{config:Dn({},n._config)}})),n.render()});return r.appendChild(a),r}},{key:"_setupDragAndDrop",value:function(t){var e=this,n=null;t.addEventListener("dragstart",function(t){var e=t.target;e.draggable&&(n=parseInt(e.dataset.index),t.dataTransfer.setData("text/plain",n),e.style.opacity="0.5")}),t.addEventListener("dragover",function(t){t.preventDefault()}),t.addEventListener("drop",function(r){if(r.preventDefault(),null!==n){var o=parseInt(r.target.dataset.index);if(!isNaN(o)&&n!==o){var i=xn(e._config.entities),a=function(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,c=[],u=!0,l=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(c.push(r.value),c.length!==e);u=!0);}catch(t){l=!0,o=t}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return c}}(t,e)||Tn(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(i.splice(n,1),1)[0];i.splice(o,0,a),e._config=Dn(Dn({},e._config),{},{entities:i}),e.dispatchEvent(new CustomEvent("config-changed",{detail:{config:Dn({},e._config)}})),e.render()}n=null,t.querySelectorAll("[draggable]").forEach(function(t){return t.style.opacity="1"})}}),t.addEventListener("dragend",function(e){null!==n&&t.querySelectorAll("[draggable]").forEach(function(t){return t.style.opacity="1"})})}}],r&&Ln(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(r.l);function Hn(t){return Hn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Hn(t)}function Gn(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var u=r&&r.prototype instanceof c?r:c,l=Object.create(u.prototype);return Nn(l,"_invoke",function(n,r,o){var i,c,u,l=0,s=o||[],f=!1,p={p:0,n:0,v:t,a:d,f:d.bind(t,4),d:function(e,n){return i=e,c=0,u=t,p.n=n,a}};function d(n,r){for(c=n,u=r,e=0;!f&&l&&!o&&e<s.length;e++){var o,i=s[e],d=p.p,y=i[2];n>3?(o=y===r)&&(u=i[(c=i[4])?5:(c=3,3)],i[4]=i[5]=t):i[0]<=d&&((o=n<2&&d<i[1])?(c=0,p.v=r,p.n=i[1]):d<y&&(o=n<3||i[0]>r||r>y)&&(i[4]=n,i[5]=r,p.n=y,c=0))}if(o||n>1)return a;throw f=!0,r}return function(o,s,y){if(l>1)throw TypeError("Generator is already running");for(f&&1===s&&d(s,y),c=s,u=y;(e=c<2?t:u)||!f;){i||(c?c<3?(c>1&&(p.n=-1),d(c,u)):p.n=u:p.v=u);try{if(l=2,i){if(c||(o="next"),e=i[o]){if(!(e=e.call(i,u)))throw TypeError("iterator result is not an object");if(!e.done)return e;u=e.value,c<2&&(c=0)}else 1===c&&(e=i.return)&&e.call(i),c<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),c=1);i=t}else if((e=(f=p.n<0)?u:n.call(r,p))!==a)break}catch(e){i=t,c=1,u=e}finally{l=1}}return{value:e,done:f}}}(n,o,i),!0),l}var a={};function c(){}function u(){}function l(){}e=Object.getPrototypeOf;var s=[][r]?e(e([][r]())):(Nn(e={},r,function(){return this}),e),f=l.prototype=c.prototype=Object.create(s);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,l):(t.__proto__=l,Nn(t,o,"GeneratorFunction")),t.prototype=Object.create(f),t}return u.prototype=l,Nn(f,"constructor",l),Nn(l,"constructor",u),u.displayName="GeneratorFunction",Nn(l,o,"GeneratorFunction"),Nn(f),Nn(f,o,"Generator"),Nn(f,r,function(){return this}),Nn(f,"toString",function(){return"[object Generator]"}),(Gn=function(){return{w:i,m:p}})()}function Nn(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}Nn=function(t,e,n,r){function i(e,n){Nn(t,e,function(t){return this._invoke(e,n,t)})}e?o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:(i("next",0),i("throw",1),i("return",2))},Nn(t,e,n,r)}function Wn(t,e,n,r,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void n(t)}c.done?e(u):Promise.resolve(u).then(r,o)}function Fn(t){return function(t){if(Array.isArray(t))return $n(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return $n(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?$n(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $n(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function Vn(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function qn(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Vn(Object(n),!0).forEach(function(e){Yn(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Vn(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function Yn(t,e,n){return(e=Jn(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Kn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Jn(r.key),r)}}function Jn(t){var e=function(t){if("object"!=Hn(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=Hn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Hn(e)?e:e+""}function Qn(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(Qn=function(){return!!t})()}function Xn(t){return Xn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Xn(t)}function Zn(t,e){return Zn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Zn(t,e)}var tr=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e,n){return e=Xn(e),function(t,e){if(e&&("object"==Hn(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Qn()?Reflect.construct(e,n||[],Xn(t).constructor):e.apply(t,n))}(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Zn(t,e)}(e,t),n=e,r=[{key:"setConfig",value:function(t){this._config=qn(qn({},t),{},{entities:Array.isArray(null==t?void 0:t.entities)?Fn(t.entities):[],icon_path:t.icon_path||"/local/community/RosCard/icon_img/icon_switch.png"}),this._hass&&this.render()}},{key:"hass",set:function(t){this._hass=t,this.firstRender&&(this._config&&this.render(),this.firstRender=!1)}},{key:"render",value:function(){var t=this;if(this._hass&&this._config){this.innerHTML="";var e=document.createElement("ha-card");e.header=this._translations[this._language].cardTitle("zh"===this._language?"开关控制":"Switch Control"),e.appendChild(this._createIcon(this._config.icon_path));var n=document.createElement("div");n.style.padding="16px",n.style.position="relative",this._config.entities.length>0?this._config.entities.forEach(function(e){var r,o=(null===(r=t._hass.states[e.entity_id])||void 0===r||null===(r=r.attributes)||void 0===r?void 0:r.friendly_name)||e.entity_id,i=document.createElement("div");i.style.marginBottom="10px",i.innerHTML="<div>".concat(t._translations[t._language].entity,": ").concat(o,"</div>"),n.appendChild(i)}):n.innerHTML="<div>".concat(this._translations[this._language].validEntity,"</div>"),e.appendChild(n),this.appendChild(e)}}}],o=[{key:"getConfigElement",value:(i=Gn().m(function t(){return Gn().w(function(t){for(;;)if(0===t.n)return t.a(2,document.createElement("aiks-switch-card-editor"))},t)}),a=function(){var t=this,e=arguments;return new Promise(function(n,r){var o=i.apply(t,e);function a(t){Wn(o,n,r,a,c,"next",t)}function c(t){Wn(o,n,r,a,c,"throw",t)}a(void 0)})},function(){return a.apply(this,arguments)})},{key:"getStubConfig",value:function(){return{entities:[]}}}],r&&Kn(n.prototype,r),o&&Kn(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o,i,a}(r.l);function er(t){return er="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},er(t)}function nr(t){return function(t){if(Array.isArray(t))return or(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||rr(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function rr(t,e){if(t){if("string"==typeof t)return or(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?or(t,e):void 0}}function or(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function ir(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function ar(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ir(Object(n),!0).forEach(function(e){cr(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ir(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function cr(t,e,n){return(e=lr(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ur(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,lr(r.key),r)}}function lr(t){var e=function(t){if("object"!=er(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=er(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==er(e)?e:e+""}function sr(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(sr=function(){return!!t})()}function fr(t){return fr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},fr(t)}function pr(t,e){return pr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},pr(t,e)}var dr=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e,n){return e=fr(e),function(t,e){if(e&&("object"==er(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,sr()?Reflect.construct(e,n||[],fr(t).constructor):e.apply(t,n))}(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&pr(t,e)}(e,t),n=e,r=[{key:"setConfig",value:function(t){this._config=ar(ar({},t),{},{entities:Array.isArray(null==t?void 0:t.entities)?nr(t.entities):[]}),this.render()}},{key:"hass",set:function(t){this._hass=t,this.firstRender&&(this.render(),this.firstRender=!1)}},{key:"render",value:function(){var t=this;if(this._config&&this._hass){this.innerHTML="";var e=document.createElement("div");e.style.padding="16px";var n=document.createElement("div");n.id="entityContainer",n.style.minHeight="100px",this._config.entities.forEach(function(e,r){var o=t._createEntityRow(r,e);n.appendChild(o)});var r=this._createButton("zh"===this._language?"添加开关":"Add Switch",function(){t._config.entities.push({entity_id:""}),t.dispatchEvent(new CustomEvent("config-changed",{detail:{config:t._config},bubbles:!0,composed:!0})),t.render()});e.appendChild(n),e.appendChild(r),this.appendChild(e),this._setupDragAndDrop(n)}}},{key:"_createEntityRow",value:function(t,e){var n=this,r=document.createElement("div");r.style.marginBottom="10px",r.style.display="flex",r.style.alignItems="center",r.draggable=!0,r.dataset.index=t,r.style.cursor="move";var o=document.createElement("span");o.innerText=this._translations[this._language].selectEntity+": ",o.style.width="100px",r.appendChild(o);var i=document.createElement("select");i.style.width="250px",i.innerHTML='<option value="">'.concat(this._translations[this._language].selectEntity,"</option>"),Object.keys(this._hass.states).forEach(function(t){if(t.startsWith("switch.")){var r,o=document.createElement("option");o.value=t;var a=(null===(r=n._hass.states[t])||void 0===r||null===(r=r.attributes)||void 0===r?void 0:r.friendly_name)||t;o.text="".concat(a," (").concat(t,")"),t===e.entity_id&&(o.selected=!0),i.appendChild(o)}}),i.addEventListener("change",function(){var e=nr(n._config.entities);e[t]=ar(ar({},e[t]),{},{entity_id:i.value}),n._config=ar(ar({},n._config),{},{entities:e}),n.dispatchEvent(new CustomEvent("config-changed",{detail:{config:ar({},n._config)}})),n.render()}),r.appendChild(i);var a=this._createButton("zh"===this._language?"删除":"Delete",function(){var e=nr(n._config.entities);e.splice(t,1),n._config=ar(ar({},n._config),{},{entities:e}),n.dispatchEvent(new CustomEvent("config-changed",{detail:{config:ar({},n._config)}})),n.render()});return r.appendChild(a),r}},{key:"_setupDragAndDrop",value:function(t){var e=this,n=null;t.addEventListener("dragstart",function(t){var e=t.target;e.draggable&&(n=parseInt(e.dataset.index),t.dataTransfer.setData("text/plain",n),e.style.opacity="0.5")}),t.addEventListener("dragover",function(t){t.preventDefault()}),t.addEventListener("drop",function(r){if(r.preventDefault(),null!==n){var o=parseInt(r.target.dataset.index);if(!isNaN(o)&&n!==o){var i=nr(e._config.entities),a=function(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,c=[],u=!0,l=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(c.push(r.value),c.length!==e);u=!0);}catch(t){l=!0,o=t}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return c}}(t,e)||rr(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(i.splice(n,1),1)[0];i.splice(o,0,a),e._config=ar(ar({},e._config),{},{entities:i}),e.dispatchEvent(new CustomEvent("config-changed",{detail:{config:ar({},e._config)}})),e.render()}n=null,t.querySelectorAll("[draggable]").forEach(function(t){return t.style.opacity="1"})}}),t.addEventListener("dragend",function(e){null!==n&&t.querySelectorAll("[draggable]").forEach(function(t){return t.style.opacity="1"})})}}],r&&ur(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(r.l);function yr(t){return yr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},yr(t)}function hr(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var u=r&&r.prototype instanceof c?r:c,l=Object.create(u.prototype);return vr(l,"_invoke",function(n,r,o){var i,c,u,l=0,s=o||[],f=!1,p={p:0,n:0,v:t,a:d,f:d.bind(t,4),d:function(e,n){return i=e,c=0,u=t,p.n=n,a}};function d(n,r){for(c=n,u=r,e=0;!f&&l&&!o&&e<s.length;e++){var o,i=s[e],d=p.p,y=i[2];n>3?(o=y===r)&&(u=i[(c=i[4])?5:(c=3,3)],i[4]=i[5]=t):i[0]<=d&&((o=n<2&&d<i[1])?(c=0,p.v=r,p.n=i[1]):d<y&&(o=n<3||i[0]>r||r>y)&&(i[4]=n,i[5]=r,p.n=y,c=0))}if(o||n>1)return a;throw f=!0,r}return function(o,s,y){if(l>1)throw TypeError("Generator is already running");for(f&&1===s&&d(s,y),c=s,u=y;(e=c<2?t:u)||!f;){i||(c?c<3?(c>1&&(p.n=-1),d(c,u)):p.n=u:p.v=u);try{if(l=2,i){if(c||(o="next"),e=i[o]){if(!(e=e.call(i,u)))throw TypeError("iterator result is not an object");if(!e.done)return e;u=e.value,c<2&&(c=0)}else 1===c&&(e=i.return)&&e.call(i),c<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),c=1);i=t}else if((e=(f=p.n<0)?u:n.call(r,p))!==a)break}catch(e){i=t,c=1,u=e}finally{l=1}}return{value:e,done:f}}}(n,o,i),!0),l}var a={};function c(){}function u(){}function l(){}e=Object.getPrototypeOf;var s=[][r]?e(e([][r]())):(vr(e={},r,function(){return this}),e),f=l.prototype=c.prototype=Object.create(s);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,l):(t.__proto__=l,vr(t,o,"GeneratorFunction")),t.prototype=Object.create(f),t}return u.prototype=l,vr(f,"constructor",l),vr(l,"constructor",u),u.displayName="GeneratorFunction",vr(l,o,"GeneratorFunction"),vr(f),vr(f,o,"Generator"),vr(f,r,function(){return this}),vr(f,"toString",function(){return"[object Generator]"}),(hr=function(){return{w:i,m:p}})()}function vr(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}vr=function(t,e,n,r){function i(e,n){vr(t,e,function(t){return this._invoke(e,n,t)})}e?o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:(i("next",0),i("throw",1),i("return",2))},vr(t,e,n,r)}function br(t,e,n,r,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void n(t)}c.done?e(u):Promise.resolve(u).then(r,o)}function gr(t){return function(t){if(Array.isArray(t))return mr(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return mr(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?mr(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function mr(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function _r(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function Or(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?_r(Object(n),!0).forEach(function(e){wr(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_r(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function wr(t,e,n){return(e=Er(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function jr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Er(r.key),r)}}function Er(t){var e=function(t){if("object"!=yr(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=yr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==yr(e)?e:e+""}function Pr(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(Pr=function(){return!!t})()}function Sr(t){return Sr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Sr(t)}function Cr(t,e){return Cr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Cr(t,e)}var xr=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e,n){return e=Sr(e),function(t,e){if(e&&("object"==yr(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Pr()?Reflect.construct(e,n||[],Sr(t).constructor):e.apply(t,n))}(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Cr(t,e)}(e,t),n=e,r=[{key:"setConfig",value:function(t){this._config=Or(Or({},t),{},{entities:Array.isArray(null==t?void 0:t.entities)?gr(t.entities):[],icon_path:t.icon_path||"/local/community/RosCard/icon_img/icon_weather.png"}),this._hass&&this.render()}},{key:"hass",set:function(t){this._hass=t,this.firstRender&&(this._config&&this.render(),this.firstRender=!1)}},{key:"render",value:function(){var t=this;if(this._hass&&this._config){this.innerHTML="";var e=document.createElement("ha-card");e.header=this._translations[this._language].cardTitle("zh"===this._language?"天气控制":"Weather Control"),e.appendChild(this._createIcon(this._config.icon_path));var n=document.createElement("div");n.style.padding="16px",n.style.position="relative",this._config.entities.length>0?this._config.entities.forEach(function(e){var r,o=(null===(r=t._hass.states[e.entity_id])||void 0===r||null===(r=r.attributes)||void 0===r?void 0:r.friendly_name)||e.entity_id,i=document.createElement("div");i.style.marginBottom="10px",i.innerHTML="<div>".concat(t._translations[t._language].entity,": ").concat(o,"</div>"),n.appendChild(i)}):n.innerHTML="<div>".concat(this._translations[this._language].validEntity,"</div>"),e.appendChild(n),this.appendChild(e)}}}],o=[{key:"getConfigElement",value:(i=hr().m(function t(){return hr().w(function(t){for(;;)if(0===t.n)return t.a(2,document.createElement("aiks-weather-card-editor"))},t)}),a=function(){var t=this,e=arguments;return new Promise(function(n,r){var o=i.apply(t,e);function a(t){br(o,n,r,a,c,"next",t)}function c(t){br(o,n,r,a,c,"throw",t)}a(void 0)})},function(){return a.apply(this,arguments)})},{key:"getStubConfig",value:function(){return{entities:[]}}}],r&&jr(n.prototype,r),o&&jr(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o,i,a}(r.l);function Tr(t){return Tr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Tr(t)}function kr(t){return function(t){if(Array.isArray(t))return Dr(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||Ar(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ar(t,e){if(t){if("string"==typeof t)return Dr(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Dr(t,e):void 0}}function Dr(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function Rr(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function Lr(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Rr(Object(n),!0).forEach(function(e){Ir(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Rr(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function Ir(t,e,n){return(e=Br(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Mr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Br(r.key),r)}}function Br(t){var e=function(t){if("object"!=Tr(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=Tr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Tr(e)?e:e+""}function Ur(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(Ur=function(){return!!t})()}function zr(t){return zr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},zr(t)}function Hr(t,e){return Hr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Hr(t,e)}var Gr=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e,n){return e=zr(e),function(t,e){if(e&&("object"==Tr(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Ur()?Reflect.construct(e,n||[],zr(t).constructor):e.apply(t,n))}(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Hr(t,e)}(e,t),n=e,r=[{key:"setConfig",value:function(t){this._config=Lr(Lr({},t),{},{entities:Array.isArray(null==t?void 0:t.entities)?kr(t.entities):[]}),this.render()}},{key:"hass",set:function(t){this._hass=t,this.firstRender&&(this.render(),this.firstRender=!1)}},{key:"render",value:function(){var t=this;if(this._config&&this._hass){this.innerHTML="";var e=document.createElement("div");e.style.padding="16px";var n=document.createElement("div");n.id="entityContainer",n.style.minHeight="100px",this._config.entities.forEach(function(e,r){var o=t._createEntityRow(r,e);n.appendChild(o)});var r=this._createButton("zh"===this._language?"添加天气":"Add Weather",function(){t._config.entities.push({entity_id:""}),t.dispatchEvent(new CustomEvent("config-changed",{detail:{config:t._config},bubbles:!0,composed:!0})),t.render()});e.appendChild(n),e.appendChild(r),this.appendChild(e),this._setupDragAndDrop(n)}}},{key:"_createEntityRow",value:function(t,e){var n=this,r=document.createElement("div");r.style.marginBottom="10px",r.style.display="flex",r.style.alignItems="center",r.draggable=!0,r.dataset.index=t,r.style.cursor="move";var o=document.createElement("span");o.innerText=this._translations[this._language].selectEntity+": ",o.style.width="100px",r.appendChild(o);var i=document.createElement("select");i.style.width="250px",i.innerHTML='<option value="">'.concat(this._translations[this._language].selectEntity,"</option>"),Object.keys(this._hass.states).forEach(function(t){if(t.startsWith("weather.")){var r,o=document.createElement("option");o.value=t;var a=(null===(r=n._hass.states[t])||void 0===r||null===(r=r.attributes)||void 0===r?void 0:r.friendly_name)||t;o.text="".concat(a," (").concat(t,")"),t===e.entity_id&&(o.selected=!0),i.appendChild(o)}}),i.addEventListener("change",function(){var e=kr(n._config.entities);e[t]=Lr(Lr({},e[t]),{},{entity_id:i.value}),n._config=Lr(Lr({},n._config),{},{entities:e}),n.dispatchEvent(new CustomEvent("config-changed",{detail:{config:Lr({},n._config)}})),n.render()}),r.appendChild(i);var a=this._createButton("zh"===this._language?"删除":"Delete",function(){var e=kr(n._config.entities);e.splice(t,1),n._config=Lr(Lr({},n._config),{},{entities:e}),n.dispatchEvent(new CustomEvent("config-changed",{detail:{config:Lr({},n._config)}})),n.render()});return r.appendChild(a),r}},{key:"_setupDragAndDrop",value:function(t){var e=this,n=null;t.addEventListener("dragstart",function(t){var e=t.target;e.draggable&&(n=parseInt(e.dataset.index),t.dataTransfer.setData("text/plain",n),e.style.opacity="0.5")}),t.addEventListener("dragover",function(t){t.preventDefault()}),t.addEventListener("drop",function(r){if(r.preventDefault(),null!==n){var o=parseInt(r.target.dataset.index);if(!isNaN(o)&&n!==o){var i=kr(e._config.entities),a=function(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,c=[],u=!0,l=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(c.push(r.value),c.length!==e);u=!0);}catch(t){l=!0,o=t}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return c}}(t,e)||Ar(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(i.splice(n,1),1)[0];i.splice(o,0,a),e._config=Lr(Lr({},e._config),{},{entities:i}),e.dispatchEvent(new CustomEvent("config-changed",{detail:{config:Lr({},e._config)}})),e.render()}n=null,t.querySelectorAll("[draggable]").forEach(function(t){return t.style.opacity="1"})}}),t.addEventListener("dragend",function(e){null!==n&&t.querySelectorAll("[draggable]").forEach(function(t){return t.style.opacity="1"})})}}],r&&Mr(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(r.l);function Nr(t){return Nr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Nr(t)}function Wr(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var u=r&&r.prototype instanceof c?r:c,l=Object.create(u.prototype);return Fr(l,"_invoke",function(n,r,o){var i,c,u,l=0,s=o||[],f=!1,p={p:0,n:0,v:t,a:d,f:d.bind(t,4),d:function(e,n){return i=e,c=0,u=t,p.n=n,a}};function d(n,r){for(c=n,u=r,e=0;!f&&l&&!o&&e<s.length;e++){var o,i=s[e],d=p.p,y=i[2];n>3?(o=y===r)&&(u=i[(c=i[4])?5:(c=3,3)],i[4]=i[5]=t):i[0]<=d&&((o=n<2&&d<i[1])?(c=0,p.v=r,p.n=i[1]):d<y&&(o=n<3||i[0]>r||r>y)&&(i[4]=n,i[5]=r,p.n=y,c=0))}if(o||n>1)return a;throw f=!0,r}return function(o,s,y){if(l>1)throw TypeError("Generator is already running");for(f&&1===s&&d(s,y),c=s,u=y;(e=c<2?t:u)||!f;){i||(c?c<3?(c>1&&(p.n=-1),d(c,u)):p.n=u:p.v=u);try{if(l=2,i){if(c||(o="next"),e=i[o]){if(!(e=e.call(i,u)))throw TypeError("iterator result is not an object");if(!e.done)return e;u=e.value,c<2&&(c=0)}else 1===c&&(e=i.return)&&e.call(i),c<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),c=1);i=t}else if((e=(f=p.n<0)?u:n.call(r,p))!==a)break}catch(e){i=t,c=1,u=e}finally{l=1}}return{value:e,done:f}}}(n,o,i),!0),l}var a={};function c(){}function u(){}function l(){}e=Object.getPrototypeOf;var s=[][r]?e(e([][r]())):(Fr(e={},r,function(){return this}),e),f=l.prototype=c.prototype=Object.create(s);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,l):(t.__proto__=l,Fr(t,o,"GeneratorFunction")),t.prototype=Object.create(f),t}return u.prototype=l,Fr(f,"constructor",l),Fr(l,"constructor",u),u.displayName="GeneratorFunction",Fr(l,o,"GeneratorFunction"),Fr(f),Fr(f,o,"Generator"),Fr(f,r,function(){return this}),Fr(f,"toString",function(){return"[object Generator]"}),(Wr=function(){return{w:i,m:p}})()}function Fr(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}Fr=function(t,e,n,r){function i(e,n){Fr(t,e,function(t){return this._invoke(e,n,t)})}e?o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:(i("next",0),i("throw",1),i("return",2))},Fr(t,e,n,r)}function $r(t,e,n,r,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void n(t)}c.done?e(u):Promise.resolve(u).then(r,o)}function Vr(t){return function(t){if(Array.isArray(t))return qr(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return qr(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?qr(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function qr(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function Yr(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function Kr(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Yr(Object(n),!0).forEach(function(e){Jr(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Yr(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function Jr(t,e,n){return(e=Xr(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Qr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Xr(r.key),r)}}function Xr(t){var e=function(t){if("object"!=Nr(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=Nr(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Nr(e)?e:e+""}function Zr(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(Zr=function(){return!!t})()}function to(t){return to=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},to(t)}function eo(t,e){return eo=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},eo(t,e)}var no=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e,n){return e=to(e),function(t,e){if(e&&("object"==Nr(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Zr()?Reflect.construct(e,n||[],to(t).constructor):e.apply(t,n))}(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&eo(t,e)}(e,t),n=e,r=[{key:"setConfig",value:function(t){this._config=Kr(Kr({},t),{},{entities:Array.isArray(null==t?void 0:t.entities)?Vr(t.entities):[],icon_path:t.icon_path||"/local/community/RosCard/icon_img/icon_host.png"}),this._hass&&this.render()}},{key:"hass",set:function(t){this._hass=t,this.firstRender&&(this._config&&this.render(),this.firstRender=!1)}},{key:"render",value:function(){var t=this;if(this._hass&&this._config){this.innerHTML="";var e=document.createElement("ha-card");e.header=this._translations[this._language].cardTitle("zh"===this._language?"主机控制":"Host Control"),e.appendChild(this._createIcon(this._config.icon_path));var n=document.createElement("div");n.style.padding="16px",n.style.position="relative",this._config.entities.length>0?this._config.entities.forEach(function(e){var r,o=(null===(r=t._hass.states[e.entity_id])||void 0===r||null===(r=r.attributes)||void 0===r?void 0:r.friendly_name)||e.entity_id,i=document.createElement("div");i.style.marginBottom="10px",i.innerHTML="<div>".concat(t._translations[t._language].entity,": ").concat(o,"</div>"),n.appendChild(i)}):n.innerHTML="<div>".concat(this._translations[this._language].validEntity,"</div>"),e.appendChild(n),this.appendChild(e)}}}],o=[{key:"getConfigElement",value:(i=Wr().m(function t(){return Wr().w(function(t){for(;;)if(0===t.n)return t.a(2,document.createElement("aiks-host-card-editor"))},t)}),a=function(){var t=this,e=arguments;return new Promise(function(n,r){var o=i.apply(t,e);function a(t){$r(o,n,r,a,c,"next",t)}function c(t){$r(o,n,r,a,c,"throw",t)}a(void 0)})},function(){return a.apply(this,arguments)})},{key:"getStubConfig",value:function(){return{entities:[]}}}],r&&Qr(n.prototype,r),o&&Qr(n,o),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r,o,i,a}(r.l);function ro(t){return ro="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ro(t)}function oo(t){return function(t){if(Array.isArray(t))return ao(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||io(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function io(t,e){if(t){if("string"==typeof t)return ao(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ao(t,e):void 0}}function ao(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function co(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function uo(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?co(Object(n),!0).forEach(function(e){lo(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):co(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function lo(t,e,n){return(e=fo(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function so(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,fo(r.key),r)}}function fo(t){var e=function(t){if("object"!=ro(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=ro(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==ro(e)?e:e+""}function po(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(po=function(){return!!t})()}function yo(t){return yo=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},yo(t)}function ho(t,e){return ho=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},ho(t,e)}var vo=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e,n){return e=yo(e),function(t,e){if(e&&("object"==ro(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,po()?Reflect.construct(e,n||[],yo(t).constructor):e.apply(t,n))}(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ho(t,e)}(e,t),n=e,r=[{key:"setConfig",value:function(t){this._config=uo(uo({},t),{},{entities:Array.isArray(null==t?void 0:t.entities)?oo(t.entities):[]}),this.render()}},{key:"hass",set:function(t){this._hass=t,this.firstRender&&(this.render(),this.firstRender=!1)}},{key:"render",value:function(){var t=this;if(this._config&&this._hass){this.innerHTML="";var e=document.createElement("div");e.style.padding="16px";var n=document.createElement("div");n.id="entityContainer",n.style.minHeight="100px",this._config.entities.forEach(function(e,r){var o=t._createEntityRow(r,e);n.appendChild(o)});var r=this._createButton("zh"===this._language?"添加主机":"Add Host",function(){t._config.entities.push({entity_id:""}),t.dispatchEvent(new CustomEvent("config-changed",{detail:{config:t._config},bubbles:!0,composed:!0})),t.render()});e.appendChild(n),e.appendChild(r),this.appendChild(e),this._setupDragAndDrop(n)}}},{key:"_createEntityRow",value:function(t,e){var n=this,r=document.createElement("div");r.style.marginBottom="10px",r.style.display="flex",r.style.alignItems="center",r.draggable=!0,r.dataset.index=t,r.style.cursor="move";var o=document.createElement("span");o.innerText=this._translations[this._language].selectEntity+": ",o.style.width="100px",r.appendChild(o);var i=document.createElement("select");i.style.width="250px",i.innerHTML='<option value="">'.concat(this._translations[this._language].selectEntity,"</option>"),Object.keys(this._hass.states).forEach(function(t){if(t.startsWith("remote.")){var r,o=document.createElement("option");o.value=t;var a=(null===(r=n._hass.states[t])||void 0===r||null===(r=r.attributes)||void 0===r?void 0:r.friendly_name)||t;o.text="".concat(a," (").concat(t,")"),t===e.entity_id&&(o.selected=!0),i.appendChild(o)}}),i.addEventListener("change",function(){var e=oo(n._config.entities);e[t]=uo(uo({},e[t]),{},{entity_id:i.value}),n._config=uo(uo({},n._config),{},{entities:e}),n.dispatchEvent(new CustomEvent("config-changed",{detail:{config:uo({},n._config)}})),n.render()}),r.appendChild(i);var a=this._createButton("zh"===this._language?"删除":"Delete",function(){var e=oo(n._config.entities);e.splice(t,1),n._config=uo(uo({},n._config),{},{entities:e}),n.dispatchEvent(new CustomEvent("config-changed",{detail:{config:uo({},n._config)}})),n.render()});return r.appendChild(a),r}},{key:"_setupDragAndDrop",value:function(t){var e=this,n=null;t.addEventListener("dragstart",function(t){var e=t.target;e.draggable&&(n=parseInt(e.dataset.index),t.dataTransfer.setData("text/plain",n),e.style.opacity="0.5")}),t.addEventListener("dragover",function(t){t.preventDefault()}),t.addEventListener("drop",function(r){if(r.preventDefault(),null!==n){var o=parseInt(r.target.dataset.index);if(!isNaN(o)&&n!==o){var i=oo(e._config.entities),a=function(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,i,a,c=[],u=!0,l=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(c.push(r.value),c.length!==e);u=!0);}catch(t){l=!0,o=t}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return c}}(t,e)||io(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(i.splice(n,1),1)[0];i.splice(o,0,a),e._config=uo(uo({},e._config),{},{entities:i}),e.dispatchEvent(new CustomEvent("config-changed",{detail:{config:uo({},e._config)}})),e.render()}n=null,t.querySelectorAll("[draggable]").forEach(function(t){return t.style.opacity="1"})}}),t.addEventListener("dragend",function(e){null!==n&&t.querySelectorAll("[draggable]").forEach(function(t){return t.style.opacity="1"})})}}],r&&so(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,r}(r.l);function bo(t){return bo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bo(t)}function go(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",o=n.toStringTag||"@@toStringTag";function i(n,r,o,i){var u=r&&r.prototype instanceof c?r:c,l=Object.create(u.prototype);return mo(l,"_invoke",function(n,r,o){var i,c,u,l=0,s=o||[],f=!1,p={p:0,n:0,v:t,a:d,f:d.bind(t,4),d:function(e,n){return i=e,c=0,u=t,p.n=n,a}};function d(n,r){for(c=n,u=r,e=0;!f&&l&&!o&&e<s.length;e++){var o,i=s[e],d=p.p,y=i[2];n>3?(o=y===r)&&(u=i[(c=i[4])?5:(c=3,3)],i[4]=i[5]=t):i[0]<=d&&((o=n<2&&d<i[1])?(c=0,p.v=r,p.n=i[1]):d<y&&(o=n<3||i[0]>r||r>y)&&(i[4]=n,i[5]=r,p.n=y,c=0))}if(o||n>1)return a;throw f=!0,r}return function(o,s,y){if(l>1)throw TypeError("Generator is already running");for(f&&1===s&&d(s,y),c=s,u=y;(e=c<2?t:u)||!f;){i||(c?c<3?(c>1&&(p.n=-1),d(c,u)):p.n=u:p.v=u);try{if(l=2,i){if(c||(o="next"),e=i[o]){if(!(e=e.call(i,u)))throw TypeError("iterator result is not an object");if(!e.done)return e;u=e.value,c<2&&(c=0)}else 1===c&&(e=i.return)&&e.call(i),c<2&&(u=TypeError("The iterator does not provide a '"+o+"' method"),c=1);i=t}else if((e=(f=p.n<0)?u:n.call(r,p))!==a)break}catch(e){i=t,c=1,u=e}finally{l=1}}return{value:e,done:f}}}(n,o,i),!0),l}var a={};function c(){}function u(){}function l(){}e=Object.getPrototypeOf;var s=[][r]?e(e([][r]())):(mo(e={},r,function(){return this}),e),f=l.prototype=c.prototype=Object.create(s);function p(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,l):(t.__proto__=l,mo(t,o,"GeneratorFunction")),t.prototype=Object.create(f),t}return u.prototype=l,mo(f,"constructor",l),mo(l,"constructor",u),u.displayName="GeneratorFunction",mo(l,o,"GeneratorFunction"),mo(f),mo(f,o,"Generator"),mo(f,r,function(){return this}),mo(f,"toString",function(){return"[object Generator]"}),(go=function(){return{w:i,m:p}})()}function mo(t,e,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(t){o=0}mo=function(t,e,n,r){function i(e,n){mo(t,e,function(t){return this._invoke(e,n,t)})}e?o?o(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:(i("next",0),i("throw",1),i("return",2))},mo(t,e,n,r)}function _o(t,e,n,r,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void n(t)}c.done?e(u):Promise.resolve(u).then(r,o)}function Oo(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function wo(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Oo(Object(n),!0).forEach(function(e){jo(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Oo(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function jo(t,e,n){return(e=Po(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Eo(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Po(r.key),r)}}function Po(t){var e=function(t){if("object"!=bo(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=bo(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==bo(e)?e:e+""}function So(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(t){}return(So=function(){return!!t})()}function Co(t){return Co=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Co(t)}function xo(t,e){return xo=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},xo(t,e)}var To=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=function(t,e,n){return e=Co(e),function(t,e){if(e&&("object"==bo(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,So()?Reflect.construct(e,n||[],Co(t).constructor):e.apply(t,n))}(this,e)).addEventListener("config-changed",function(e){return t.setConfig(e.detail.config)}),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&xo(t,e)}(e,t),r=e,o=[{key:"setConfig",value:function(t){this._config=wo(wo({},t),{},{id:t.id||this.generateUUID(),icon_path:t.icon_path||"/local/community/RosCard/icon_img/icon_statistics.png",device_types:wo({light:!0,switch:!0,climate:!0},t.device_types||{})}),this._hass&&this.render()}},{key:"generateUUID",value:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)})}},{key:"hass",set:function(t){this._hass=t,this._config&&this.render()}},{key:"getEnabledTypesText",value:function(){var t=this,e={light:"zh"===this._language?"灯":"Light",switch:"zh"===this._language?"开关":"Switch",climate:"zh"===this._language?"空调":"Climate"},n=Object.keys(this._config.device_types).filter(function(e){return t._config.device_types[e]}).map(function(t){return e[t]}).join("、"),r="zh"===this._language?"已启用：":"Enabled: ";return n?r+n:"zh"===this._language?"无":"None"}},{key:"render",value:function(){if(this._hass&&this._config){this.innerHTML="";var t=document.createElement("ha-card");t.header=this._translations[this._language].cardTitle("zh"===this._language?"统计":"Statistics"),t.appendChild(this._createIcon(this._config.icon_path));var e=document.createElement("div");e.style.padding="16px";var n=document.createElement("div");n.style.padding="10px 12px",n.style.backgroundColor="#e3f2fd",n.style.borderRadius="8px",n.style.color="#1565c0",n.style.fontSize="0.95em",n.style.display="inline-block",n.textContent=this.getEnabledTypesText(),e.appendChild(n),t.appendChild(e),this.appendChild(t)}}}],i=[{key:"getConfigElement",value:(a=go().m(function t(){return go().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,Promise.resolve().then(n.bind(n,373));case 1:return t.a(2,document.createElement("aiks-switch-monitor-card-editor"))}},t)}),c=function(){var t=this,e=arguments;return new Promise(function(n,r){var o=a.apply(t,e);function i(t){_o(o,n,r,i,c,"next",t)}function c(t){_o(o,n,r,i,c,"throw",t)}i(void 0)})},function(){return c.apply(this,arguments)})},{key:"getStubConfig",value:function(){return{monitor_name:"zh"==(navigator.language.startsWith("zh")?"zh":"en")?"未命名监听":"Unnamed Monitor",device_types:{light:!0,switch:!0,climate:!0}}}}],o&&Eo(r.prototype,o),i&&Eo(r,i),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,o,i,a,c}(r.l),ko=n(373);customElements.define("aiks-tv-card",_),customElements.define("aiks-tv-card-editor",D),customElements.define("aiks-light-card",q),customElements.define("aiks-light-card-editor",at),customElements.define("aiks-fan-card",Ot),customElements.define("aiks-fan-card-editor",Lt),customElements.define("aiks-scene-card",Kt),customElements.define("aiks-scene-card-editor",ue),customElements.define("aiks-media-player-card",je),customElements.define("aiks-media-player-card-editor",Me),customElements.define("aiks-climate-card",Qe),customElements.define("aiks-climate-card-editor",fn),customElements.define("aiks-cover-card",Sn),customElements.define("aiks-cover-card-editor",zn),customElements.define("aiks-switch-card",tr),customElements.define("aiks-switch-card-editor",dr),customElements.define("aiks-weather-card",xr),customElements.define("aiks-weather-card-editor",Gr),customElements.define("aiks-host-card",no),customElements.define("aiks-host-card-editor",vo),customElements.define("aiks-switch-monitor-card",To),customElements.define("aiks-switch-monitor-card-editor",ko.AiksSwitchMonitorCardEditor),window.customCards=window.customCards||[],window.customCards.push({type:"aiks-tv-card",name:navigator.language.startsWith("zh")?"电视(ROS)":"TV(ROS)",description:navigator.language.startsWith("zh")?"电视卡片":"TV Card",preview:!0},{type:"aiks-light-card",name:navigator.language.startsWith("zh")?"灯光(ROS)":"Light(ROS)",description:navigator.language.startsWith("zh")?"灯光卡片":"Light Card",preview:!0},{type:"aiks-fan-card",name:navigator.language.startsWith("zh")?"风扇(ROS)":"Fan(ROS)",description:navigator.language.startsWith("zh")?"风扇卡片":"Fan Card",preview:!0},{type:"aiks-scene-card",name:navigator.language.startsWith("zh")?"场景(ROS)":"Scene(ROS)",description:navigator.language.startsWith("zh")?"场景卡片":"Scene Card",preview:!0},{type:"aiks-media-player-card",name:navigator.language.startsWith("zh")?"媒体播放器(ROS)":"Media Player(ROS)",description:navigator.language.startsWith("zh")?"媒体播放器卡片":"Media Player Card",preview:!0},{type:"aiks-climate-card",name:navigator.language.startsWith("zh")?"空调(ROS)":"AC(ROS)",description:navigator.language.startsWith("zh")?"空调卡片":"AC Card",preview:!0},{type:"aiks-cover-card",name:navigator.language.startsWith("zh")?"窗帘(ROS)":"Cover(ROS)",description:navigator.language.startsWith("zh")?"窗帘卡片":"Cover Card",preview:!0},{type:"aiks-switch-card",name:navigator.language.startsWith("zh")?"开关(ROS)":"Switch(ROS)",description:navigator.language.startsWith("zh")?"开关卡片":"Switch Card",preview:!0},{type:"aiks-weather-card",name:navigator.language.startsWith("zh")?"天气(ROS)":"Weather(ROS)",description:navigator.language.startsWith("zh")?"天气卡片":"Weather Card",preview:!0},{type:"aiks-host-card",name:navigator.language.startsWith("zh")?"主机(ROS)":"Host(ROS)",description:navigator.language.startsWith("zh")?"主机卡片":"Host Card",preview:!0},{type:"aiks-switch-monitor-card",name:navigator.language.startsWith("zh")?"统计(ROS)":"Statistics(ROS)",description:navigator.language.startsWith("zh")?"统计卡片":"Statistics Card",preview:!0}),console.log("✅ Aiks Custom Cards loaded successfully!")})();
//# sourceMappingURL=RosCard.js.map